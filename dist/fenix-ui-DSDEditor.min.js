define(["jquery","amplify-pubsub","loglevel","parsleyjs"],function(t,e,i,n){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){var n,o;n=[i(2),i(3)],o=function(t,e){function i(i,n,o){t.extend(!0,c,u,n),this.DSDE=new e(c),this.DSDE.render(t(i),c,o)}function n(t){this.DSDE.set(t)}function o(){return this.DSDE.get()}function a(){return this.DSDE.validate()}function s(t){this.DSDE.editable(t)}function r(){this.DSDE.reset()}function d(){this.DSDE.destroy()}function l(){return this.DSDE.hasChanged()}var u={},c={};return{init:i,set:n,get:o,validate:a,editable:s,reset:r,destroy:d,hasChanged:l}}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(e,i){e.exports=t},function(t,e,i){var n,o;n=[i(2),i(56),i(5),i(25),i(42),i(61),i(29),i(59),i(4),i(37),i(38),i(39),i(30)],o=function(t,e,n,o,a,s,r,d,l,u,c,p,h){function f(e){this.config={},this.$container=null,t.extend(!0,this.config,v,e),this.lang=this.config.lang.toLowerCase(),this.$divDSDDisplay,this.$divColEditor,this.dsd=[],this.DSDDisplay,this.colEditor,this.changed=!1}function y(t,e){if(!t)return-1;for(var i=0;i<t.length;i++)if(t[i].id==e)return i;return-1}function m(t,e){var i=y(t,e);return i==-1?null:t[i]}var v={},D={divDSD:"#divDSD",divColEditor:"#divColEditor",divColEditorCnt:"#divColEditorCnt",btnAddDimension:"#btnAddDimension",btnAddValue:"#btnAddValue",btnAddOther:"#btnAddOther",btnColEditorOk:"#btnColEditorOk",btnColEditorCancel:"#btnColEditorCancel"},b={dimension:"dimension",value:"value",other:"other"},E={DSDEDITOR_TO_COLUMN_EDITOR:"fx.DSDEditor.toColumnEditor",DSDEDITOR_TO_COLUMN_SUMMARY:"fx.DSDEditor.toColumnSummary"};return f.prototype.render=function(s,r,d){t.extend(!0,this.config,r),this.$container=s,this.$container.html(n),i(62),this.$divDSDDisplay=this.$container.find(D.divDSD),this.$divColEditor=this.$container.find(D.divColEditor),this.DSDDisplay=new o(this.config),this.DSDDisplay.render(this.$divDSDDisplay),this.colEditor=new a(this.config);var l=this.$container.find(D.divColEditorCnt);this.colEditor.render(l),this.$divColEditor.hide(),this._bindEvents(),e.info("DSDEditor init with ",this.config),d&&d()},f.prototype.set=function(t){e.info("DSD Set",t),this.dsd=t,this.updateDSDView()},f.prototype.get=function(){return this.dsd},f.prototype.switchVisibility=function(t){t==D.divColEditor?(this.$divDSDDisplay.hide(),this.$divColEditor.show(),h.publish(E.DSDEDITOR_TO_COLUMN_EDITOR)):t==D.divDSD&&(this.$divColEditor.hide(),this.$divDSDDisplay.show(),h.publish(E.DSDEDITOR_TO_COLUMN_SUMMARY))},f.prototype.addColumn=function(t){this.switchVisibility(D.divColEditor),this.colEditor.newColumn(),this.colEditor.setColumnEditorType(t)},f.prototype.editColumn=function(t){this.switchVisibility(D.divColEditor),this.colEditor.setColumn(t)},f.prototype.colEditDone=function(){var t=this.colEditor.getColumn();this.dsd||(this.dsd=[]),""==t.id&&(t.id=(new s).generate(this.dsd,t));var i=y(this.dsd,t.id);e.info(i,this.dsd,typeof this.dsd,t),i==-1?this.dsd.push(t):this.dsd[i]=t,this._sortColumnsByType(),this.updateDSDView(),this.changed=!0},f.prototype._sortColumnsByType=function(){this.dsd.sort(function(t,e){return t.key&&e.key?0:t.key?-1:e.key?1:"value"==t.subject&&"value"==e.subject?0:"value"==t.subject?-1:"value"==e.subject?1:0})},f.prototype.updateDSDView=function(){this.DSDDisplay.setCols(this.dsd)},f.prototype._colAddClick=function(t){"addDim"==t?this.addColumn(b.dimension):"addVal"==t?this.addColumn(b.value):"addOther"==t&&this.addColumn(b.other)},f.prototype.reset=function(){this.initDSD(),this.updateDSDView(),this.changed=!1},f.prototype.hasChanged=function(){return this.changed},f.prototype._bindEvents=function(){var t=this;h.subscribe(r.COLUMN_CLICK_ADD,this,t._colAddClick),this.$container.find(D.btnColEditorOk).on("click",function(){var e=t.colEditor.validate();e&&(t.colEditDone(),t.switchVisibility(D.divDSD))}),this.$container.find(D.btnColEditorCancel).on("click",function(){t.colEditor.changed()&&!confirm(p[t.lang].unsavedChanges)||(t.colEditor.reset(),t.switchVisibility(D.divDSD))}),h.subscribe(r.COLUMN_CLICK_EDIT,this,t._colDisplayEditClicked),h.subscribe(r.COLUMN_CLICK_DELETE,this,t._colDisplayDeleteClicked)},f.prototype._unbindEvents=function(){h.unsubscribe(r.COLUMN_CLICK_ADD,this._colAddClick),this.$container.find(D.btnColEditorOk).off("click"),this.$container.find(D.btnColEditorCancel).off("click"),h.unsubscribe(r.COLUMN_CLICK_EDIT,this._colDisplayEditClicked),h.unsubscribe(r.COLUMN_CLICK_DELETE,this._colDisplayDeleteClicked)},f.prototype.destroy=function(){this._unbindEvents(),this.DSDDisplay.destroy(),this.colEditor.destroy()},f.prototype._colDisplayEditClicked=function(t){var e=m(this.dsd,t);this.editColumn(e)},f.prototype._colDisplayDeleteClicked=function(t){if(!confirm(p[this.lang].areYouSure))return!1;var e=y(this.dsd,t);e!=-1&&this.dsd.splice(e,1),this.updateDSDView(),this.changed=!0},f.prototype.editable=function(t){t?this.colEditor.setEditMode({subject:!0,domain:!0,datatype:!0}):this.colEditor.setEditMode({subject:!1,domain:!1,datatype:!1}),this.DSDDisplay.isEditable(t)},f.prototype.validate=function(){var t=new d,e=t.validateColumns(this.get());return this.updateValidationUI(e),!e||0==e.length},f.prototype.isValid=function(){var t=new d,e=t.validateColumns(this.get());return!e||0==e.length},f.prototype.updateValidationUI=function(t){if(t)for(var i=0;i<t.length;i++)e.warn(t[i].message)},f}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[],o=function(){"use strict";var t={NULL_COLUMN:"nullColumn",TITLE_BLANK:"titleBlank",DIMENSION_DATATYPE_ERROR:"dimnsionDataTypeError",SUBJECT_EMPTY:"subjectEmpty",DATATYPE_EMPTY:"dataTypeEmpty",CODELIST_EMPTY:"codelistEmpty",NULL_COLUMNS:"nullColumns",AT_LEAST_2_COLS:"atLeast2Cols",DUPLICATE_IDS:"duplicateIDs",AT_LEAST_1_KEY:"atLeast1Key",AT_LEAST_1_VALUE:"atLeast1Value",DUPLICATE_SUBJECTS:"duplicateSubjects"};return t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<div id="divDSD">\n</div>\n<div id="divColEditor">\n    <div id="divColEditorCnt">\n    </div>\n    <button id="btnColEditorOk" class="btn btn-default"><span class="glyphicon glyphicon-ok"></span></button>\n    <button id="btnColEditorCancel" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>\n</div>'},useData:!0})},function(t,e,i){t.exports=i(7).default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(){var t=new r.HandlebarsEnvironment;return h.extend(t,r),t.SafeString=l.default,t.Exception=c.default,t.Utils=h,t.escapeExpression=h.escapeExpression,t.VM=y,t.template=function(e){return y.template(e,t)},t}e.__esModule=!0;var s=i(8),r=o(s),d=i(22),l=n(d),u=i(10),c=n(u),p=i(9),h=o(p),f=i(23),y=o(f),m=i(24),v=n(m),D=a();D.create=a,v.default(D),D.default=D,e.default=D,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){this.helpers=t||{},this.partials=e||{},this.decorators=i||{},d.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}e.__esModule=!0,e.HandlebarsEnvironment=o;var a=i(9),s=i(10),r=n(s),d=i(11),l=i(19),u=i(21),c=n(u),p="4.0.5";e.VERSION=p;var h=7;e.COMPILER_REVISION=h;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=f;var y="[object Object]";o.prototype={constructor:o,logger:c.default,log:c.default.log,registerHelper:function(t,e){if(a.toString.call(t)===y){if(e)throw new r.default("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(a.toString.call(t)===y)a.extend(this.partials,t);else{if("undefined"==typeof e)throw new r.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(a.toString.call(t)===y){if(e)throw new r.default("Arg not supported with multiple decorators");a.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var m=c.default.log;e.log=m,e.createFrame=a.createFrame,e.logger=c.default},function(t,e){"use strict";function i(t){return u[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function o(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function a(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return p.test(t)?t.replace(c,i):t}function s(t){return!t&&0!==t||!(!y(t)||0!==t.length)}function r(t){var e=n({},t);return e._parent=t,e}function d(t,e){return t.path=e,t}function l(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=n,e.indexOf=o,e.escapeExpression=a,e.isEmpty=s,e.createFrame=r,e.blockParams=d,e.appendContextPath=l;var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},c=/[&<>"'`=]/g,p=/[&<>"'`=]/,h=Object.prototype.toString;e.toString=h;var f=function(t){return"function"==typeof t};f(/x/)&&(e.isFunction=f=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)}),e.isFunction=f;var y=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===h.call(t)};e.isArray=y},function(t,e){"use strict";function i(t,e){var o=e&&e.loc,a=void 0,s=void 0;o&&(a=o.start.line,s=o.start.column,t+=" - "+a+":"+s);for(var r=Error.prototype.constructor.call(this,t),d=0;d<n.length;d++)this[n[d]]=r[n[d]];Error.captureStackTrace&&Error.captureStackTrace(this,i),o&&(this.lineNumber=a,this.column=s)}e.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,e.default=i,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){s.default(t),d.default(t),u.default(t),p.default(t),f.default(t),m.default(t),D.default(t)}e.__esModule=!0,e.registerDefaultHelpers=o;var a=i(12),s=n(a),r=i(13),d=n(r),l=i(14),u=n(l),c=i(15),p=n(c),h=i(16),f=n(h),y=i(17),m=n(y),v=i(18),D=n(v)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(9);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,i){var o=i.inverse,a=i.fn;if(e===!0)return a(this);if(e===!1||null==e)return o(this);if(n.isArray(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):o(this);if(i.data&&i.ids){var s=n.createFrame(i.data);s.contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:s}}return a(e,i)})},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(9),a=i(10),s=n(a);e.default=function(t){t.registerHelper("each",function(t,e){function i(e,i,a){l&&(l.key=e,l.index=i,l.first=0===i,l.last=!!a,u&&(l.contextPath=u+e)),d+=n(t[e],{data:l,blockParams:o.blockParams([t[e],e],[u+e,null])})}if(!e)throw new s.default("Must pass iterator to #each");var n=e.fn,a=e.inverse,r=0,d="",l=void 0,u=void 0;if(e.data&&e.ids&&(u=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(l=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var c=t.length;r<c;r++)r in t&&i(r,r,r===t.length-1);else{var p=void 0;for(var h in t)t.hasOwnProperty(h)&&(void 0!==p&&i(p,r-1),p=h,r++);void 0!==p&&i(p,r-1,!0)}return 0===r&&(d=a(this)),d})},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(10),a=n(o);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(9);e.default=function(t){t.registerHelper("if",function(t,e){return n.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||n.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers.if.call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],i=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var o=1;null!=i.hash.level?o=i.hash.level:i.data&&null!=i.data.level&&(o=i.data.level),e[0]=o,t.log.apply(t,e)})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(9);e.default=function(t){t.registerHelper("with",function(t,e){n.isFunction(t)&&(t=t.call(this));var i=e.fn;if(n.isEmpty(t))return e.inverse(this);var o=e.data;return e.data&&e.ids&&(o=n.createFrame(e.data),o.contextPath=n.appendContextPath(e.data.contextPath,e.ids[0])),i(t,{data:o,blockParams:n.blockParams([t],[o&&o.contextPath])})})},t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){s.default(t)}e.__esModule=!0,e.registerDefaultDecorators=o;var a=i(20),s=n(a)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(9);e.default=function(t){t.registerDecorator("inline",function(t,e,i,o){var a=t;return e.partials||(e.partials={},a=function(o,a){var s=i.partials;i.partials=n.extend({},s,e.partials);var r=t(o,a);return i.partials=s,r}),e.partials[o.args[0]]=o.fn,a})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(9),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(o.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=o.lookupLevel(t),"undefined"!=typeof console&&o.lookupLevel(o.level)<=t){var e=o.methodMap[t];console[e]||(e="log");for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];console[e].apply(console,n)}}};e.default=o,t.exports=e.default},function(t,e){"use strict";function i(t){this.string=t}e.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},e.default=i,t.exports=e.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t){var e=t&&t[0]||1,i=v.COMPILER_REVISION;if(e!==i){if(e<i){var n=v.REVISION_CHANGES[i],o=v.REVISION_CHANGES[e];throw new m.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new m.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){function i(i,n,o){o.hash&&(n=f.extend({},n,o.hash),o.ids&&(o.ids[0]=!0)),i=e.VM.resolvePartial.call(this,i,n,o);var a=e.VM.invokePartial.call(this,i,n,o);if(null==a&&e.compile&&(o.partials[o.name]=e.compile(i,t.compilerOptions,e),a=o.partials[o.name](n,o)),null!=a){if(o.indent){for(var s=a.split("\n"),r=0,d=s.length;r<d&&(s[r]||r+1!==d);r++)s[r]=o.indent+s[r];a=s.join("\n")}return a}throw new m.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")}function n(e){function i(e){return""+t.main(o,e,o.helpers,o.partials,s,d,r)}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a.data;n._setup(a),!a.partial&&t.useData&&(s=c(e,s));var r=void 0,d=t.useBlockParams?[]:void 0;return t.useDepths&&(r=a.depths?e!==a.depths[0]?[e].concat(a.depths):a.depths:[e]),(i=p(t.main,i,o,a.depths||[],s,d))(e,a)}if(!e)throw new m.default("No environment passed to template");if(!t||!t.main)throw new m.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var o={strict:function(t,e){if(!(e in t))throw new m.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:f.escapeExpression,invokePartial:i,fn:function(e){var i=t[e];return i.decorator=t[e+"_d"],i},programs:[],program:function(t,e,i,n,o){var a=this.programs[t],s=this.fn(t);return e||o||n||i?a=r(this,t,s,e,i,n,o):a||(a=this.programs[t]=r(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=f.extend({},e,t)),i},noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(i){i.partial?(o.helpers=i.helpers,o.partials=i.partials,o.decorators=i.decorators):(o.helpers=o.merge(i.helpers,e.helpers),t.usePartial&&(o.partials=o.merge(i.partials,e.partials)),(t.usePartial||t.useDecorators)&&(o.decorators=o.merge(i.decorators,e.decorators)))},n._child=function(e,i,n,a){if(t.useBlockParams&&!n)throw new m.default("must pass block params");if(t.useDepths&&!a)throw new m.default("must pass parent depths");return r(o,e,t[e],i,0,n,a)},n}function r(t,e,i,n,o,a,s){function r(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=s;return s&&e!==s[0]&&(r=[e].concat(s)),i(t,e,t.helpers,t.partials,o.data||n,a&&[o.blockParams].concat(a),r)}return r=p(i,r,t,s,n,a),r.program=e,r.depth=s?s.length:0,r.blockParams=o||0,r}function d(t,e,i){return t?t.call||i.name||(i.name=t,t=i.partials[t]):t="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name],t}function l(t,e,i){i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var n=void 0;if(i.fn&&i.fn!==u&&(i.data=v.createFrame(i.data),n=i.data["partial-block"]=i.fn,n.partials&&(i.partials=f.extend({},i.partials,n.partials))),void 0===t&&n&&(t=n),void 0===t)throw new m.default("The partial "+i.name+" could not be found");if(t instanceof Function)return t(e,i)}function u(){return""}function c(t,e){return e&&"root"in e||(e=e?v.createFrame(e):{},e.root=t),e}function p(t,e,i,n,o,a){if(t.decorator){var s={};e=t.decorator(e,s,i,n&&n[0],o,a,n),f.extend(e,s)}return e}e.__esModule=!0,e.checkRevision=a,e.template=s,e.wrapProgram=r,e.resolvePartial=d,e.invokePartial=l,e.noop=u;var h=i(9),f=o(h),y=i(10),m=n(y),v=i(8)},function(t,e){(function(i){"use strict";e.__esModule=!0,e.default=function(t){var e="undefined"!=typeof i?i:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e,i){var n,o;n=[i(2),i(26),i(27),i(31),i(39)],o=function(t,e,i,n,o){function a(e){this.config={},this.$container=null,t.extend(!0,this.config,s,e),this.$tdAddDim=null,this.$tdAddVal=null,this.$tdAddOther=null,this.$colsDisplay=null,this.lang=this.config.lang.toLowerCase(),this.addColBtnDim=new i(this.config),this.addColBtnVal=new i(this.config),this.addColBtnOther=new i(this.config),this.colsDisplay=new n(this.config)}var s={},r={idTDAddDim:"#tdAddDim",idTDAddVal:"#tdAddVal",idTDAddOther:"#tdAddOther",idColsDisplay:"#colsDisplay",idTblAddCol:"#tblAddCol"};return a.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$tdAddDim=this.$container.find(r.idTDAddDim),this.$tdAddVal=this.$container.find(r.idTDAddVal),this.$tdAddOther=this.$container.find(r.idTDAddOther),this.$colsDisplay=this.$container.find(r.idColsDisplay),this.addColBtnDim.render(this.$tdAddDim),this.addColBtnVal.render(this.$tdAddVal),this.addColBtnOther.render(this.$tdAddOther),this.addColBtnDim.set({title:o[this.lang].dimension,help:o[this.lang].helpDim,evtId:"addDim",headerClass:"bg-dim"}),this.addColBtnVal.set({title:o[this.lang].value,help:o[this.lang].helpVal,evtId:"addVal",headerClass:"bg-val"}),this.addColBtnOther.set({title:o[this.lang].other,help:o[this.lang].helpOther,evtId:"addOther",headerClass:"bg-other"}),this.colsDisplay.render(this.$colsDisplay),this._bindEvents()},a.prototype.setCols=function(t){this.reset(),this.colsDisplay.set(t)},a.prototype.reset=function(){this.colsDisplay.reset()},a.prototype._bindEvents=function(){},a.prototype._unbindEvents=function(){},a.prototype.destroy=function(){this.addColBtnDim.destroy(),this.addColBtnVal.destroy(),this.addColBtnOther.destroy(),this.colsDisplay.destroy()},a.prototype.isEditable=function(t){if("boolean"==typeof t)return"function"==typeof this.colsDisplay.editable&&this.colsDisplay.editable(t),t?this.$container.find(r.idTblAddCol).show():this.$container.find(r.idTblAddCol).hide(),t},a}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<table id="tblAddCol" class="table">\n    <tbody>\n        <tr>\n            <td id="tdAddDim" class="cTdDim"></td>\n            <td id="tdAddVal" class="cTdVal"></td>\n            <td id="tdAddOther" class="cTdOther"></td>\n        </tr>\n    </tbody>\n</table>\n\n<div id="colsDisplay"></div>'},useData:!0})},function(t,e,i){var n,o;n=[i(2),i(28),i(29),i(30)],o=function(t,e,i,n){function o(e){this.config={},this.$container=null,t.extend(!0,this.config,a,e),this.evtId="",this.$btnAddColTitle=null,this.$btnAdd=null,this.$tdAddColButton_help=null}var a={},s={idBtnAddColTitle:"#btnAddColButtonTitle",idBtnAdd:"#btnAdd",idTdAddColButton_help:"#tdAddColButton_help",idAddColH:"#addColH"},r={addColButton_btnClick:i.COLUMN_CLICK_ADD};return o.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$btnAddColTitle=this.$container.find(s.idBtnAddColTitle),this.$btnAdd=this.$container.find(s.idBtnAdd),this.$tdAddColButton_help=this.$container.find(s.idTdAddColButton_help),this._bindEvents()},o.prototype.set=function(t){t&&(t.title&&this.setTitle(t.title),t.help&&this.setHelp(t.help),t.evtId&&this.setEvtId(t.evtId),t.headerClass&&this.$container.find(s.idAddColH).addClass(t.headerClass))},o.prototype.setTitle=function(t){this.$btnAddColTitle.html(t)},o.prototype.setHelp=function(t){this.$tdAddColButton_help.html(t)},o.prototype.setEvtId=function(t){this.evtId=t},o.prototype.reset=function(){this.setTitle(""),this.setHelp("")},o.prototype._bindEvents=function(){var t=this;this.$btnAdd.on("click",function(){n.publish(r.addColButton_btnClick,t.evtId)})},o.prototype._unbindEvents=function(){this.$btnAdd.off("click")},o.prototype.destroy=function(){this._unbindEvents()},o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<table class="table roundBorder">\n    <thead>\n        <tr id="addColH">\n            <th class="btnAddColHead">\n                <span id="btnAddColButtonTitle"></span>\n                <br />\n                <button id="btnAdd" type="button" class="btn btn-primary fx-button-primary-color"><span class="glyphicon glyphicon-plus"></span></button>\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td id="tdAddColButton_help"></td>\n        </tr>\n    </tbody>\n</table>'},useData:!0})},function(t,e,i){var n,o;n=[],o=function(){"use strict";var t={CODELIST_SELECTOR_CHANGED:"fx.CodelistSelector.chaged",DYNAMIC_RADIO_CHANGED:"fx.DynamicRadio.chaged",COLUMN_CLICK_ADD:"fx.addColButton.btnClick",COLUMN_CLICK_EDIT:"fx.coldisplay.edit",COLUMN_CLICK_DELETE:"fx.coldisplay.delete"};return t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,i){t.exports=e},function(t,e,i){var n,o;n=[i(2),i(32),i(33),i(34),i(36)],o=function(t,e,i,n,o){function a(e){this.config={},this.$container=null,t.extend(!0,this.config,r,e),this.$trHead=null,this.$trEdit=null,this.$trSubj=null,this.$trDataType=null,this.$trDomain=null,this.editBtns=[],this.editable}function s(t){var e=(90/t.length,l.colTH);return e=e.replace("%cnt%",u.MLStringToString(t.title,"<br/>")),e=t.key?e.replace("%cl%","bg-dim"):"value"==t.subject?e.replace("%cl%","bg-val"):e.replace("%cl%","bg-other")}var r={lang:"EN"},d={idTrHead:"#trColInfoHead",idTrEdit:"#trEdit",idTrSubj:"#trSubj",idTrDataType:"#trDataType",idTrDomain:"#trDomain",idTrSuppl:"#trSuppl"},l={colTH_empty:'<th style="width:10%"></th>',colTD_empty:"<td></td>",colTH:'<th class="%cl%">%cnt%</th>',colTD_Edit:'<td><div id="%id%"></div></td>',colTD:"<td>%cnt%</td>",colSubj:'<td class="text-muted">Subject</td>',colDataType:'<td class="text-muted">Data type</td>',colDomain:'<td class="text-muted">Domain</td>',colSuppl:'<td class="text-muted">Supplemental</td>'},u=new i;return a.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$trHead=this.$container.find(d.idTrHead),this.$trEdit=this.$container.find(d.idTrEdit),this.$trSubj=this.$container.find(d.idTrSubj),this.$trDataType=this.$container.find(d.idTrDataType),this.$trDomain=this.$container.find(d.idTrDomain),this.$trSuppl=this.$container.find(d.idTrSuppl),this._bindEvents()},a.prototype.set=function(t){this.reset(),t&&(this._createHeader(t),this._createEditRow(t),this._createRows(t))},a.prototype._createHeader=function(t){if(!t)return"";for(var e=l.colTH_empty,i=0;i<t.length;i++)e+=s(t[i]);this.$trHead.html(e)},a.prototype._createEditRow=function(t){if(t){for(var e=l.colTD_empty,i="tdEdit_",o=0;o<t.length;o++)e+=l.colTD_Edit.replace("%id%",i+""+t[o].id);for(this.$trEdit.html(e),this.editBtns=[],o=0;o<t.length;o++){var a="#"+i+t[o].id,s=this.$trEdit.find(a),r=new n(this.config);r.render(s),r.setEventId(t[o].id),r.deleteEnabled(this.editable),this.editBtns.push(r)}}},a.prototype._createRows=function(t){if(!t)return"";for(var e=l.colSubj,i=l.colDataType,n=l.colDomain,o=l.colSuppl,a=0;a<t.length;a++)e+=this._createColTD(t[a],"subject",this.config.lang),i+=this._createColTD(t[a],"dataType",this.config.lang),n+=this._createColTD(t[a],"domain",this.config.lang),o+=this._createColTD(t[a],"supplemental",this.config.lang);this.$trSubj.html(e),this.$trDataType.html(i),this.$trDomain.html(n),this.$trSuppl.html(o)},a.prototype._createColTD=function(t,e,i){var n=l.colTD;switch(e){case"subject":n=t.subject?n.replace("%cnt%",t.subject):n.replace("%cnt%","");break;case"dataType":n=t.dataType?n.replace("%cnt%",t.dataType):n.replace("%cnt%","");break;case"domain":n=t.domain?n.replace("%cnt%",this._domainToString(t.domain,i)):n.replace("%cnt%","");break;case"supplemental":n=t.supplemental?n.replace("%cnt%",u.MLStringToString(t.supplemental,"<br/>")):n.replace("%cnt%","")}return n},a.prototype._domainToString=function(t,e){if(t.codes&&t.codes[0]){var i=t.codes[0].idCodeList;t.codes[0].version&&(i+="|"+t.codes[0].version);var n=new o(this.config),a=n.getCodelist(i);return a?a.text[e]:""}return""},a.prototype.reset=function(){this.$trHead.html(""),this.$trSubj.html(""),this.$trDataType.html(""),this.$trDomain.html(""),this.$trSuppl.html(""),this.editBtns=[]},a.prototype.editable=function(t){if(this.editable=t,this.editBtns)for(var e=0;e<this.editBtns.length;e++)this.editBtns[e].deleteEnabled(t);return t},a.prototype._bindEvents=function(){},a.prototype._unbindEvents=function(){},a.prototype.destroy=function(){if(this.editBtns)for(var t=0;t<this.editBtns.length;t++)this.editBtns[t].destroy()},a}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<table class="table table-bordered">\n    <thead>\n        <tr id="trColInfoHead"></tr>\n    </thead>\n    <tbody>\n        <tr id="trEdit"></tr>\n        <tr id="trSubj"></tr>\n        <tr id="trDataType"></tr>\n        <tr id="trDomain"></tr>\n        <tr id="trSuppl" style="display: none;"></tr>\n    </tbody>\n</table>'},useData:!0})},function(t,e,i){var n,o;n=[],o=function(){var t=function(){};return t.prototype.MLStringToString=function(t,e){if(!t)return"";var i="";for(var n in t)i+=n+": "+t[n]+e;return i=i.substring(0,i.length-e.length)},t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(2),i(35),i(29),i(30)],o=function(t,e,i,n){function o(e){this.config={},this.$container=null,t.extend(!0,this.config,a,e),this.$btnEdit=null,this.$btnDel=null,this.evtId=""}var a={},s={idBtnEdit:"#colsDisplayColEdit",idBtnDel:"#colsDisplayColDel"},r={clickEdit:i.COLUMN_CLICK_EDIT,clickDelete:i.COLUMN_CLICK_DELETE};return o.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$btnEdit=this.$container.find(s.idBtnEdit),this.$btnDel=this.$container.find(s.idBtnDel),this._bindEvents()},o.prototype.deleteEnabled=function(t){"undefined"!=typeof t&&(t?this.$btnDel.prop("disabled",!1):this.$btnDel.prop("disabled",!0))},o.prototype.setEventId=function(t){this.evtId=t},o.prototype._bindEvents=function(){var t=this;this.$btnEdit.on("click",function(){n.publish(r.clickEdit,t.evtId)}),this.$btnDel.on("click",function(){n.publish(r.clickDelete,t.evtId)})},o.prototype._unbindEvents=function(){this.$btnEdit.off("click"),this.$btnDel.off("click")},o.prototype.destroy=function(){this._unbindEvents()},o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<button id="colsDisplayColEdit" class="btn btn-primary"><span class="glyphicon glyphicon-pencil"></span> </button>\n<button id="colsDisplayColDel" class="btn btn-primary"><span class="glyphicon glyphicon-trash"></span> </button>'},useData:!0})},function(t,e,i){var n,o;n=[i(2),i(37),i(38)],o=function(t,e,i){function n(e,i){this.config={},t.extend(!0,this.config,e,o),this.codelists=this.config.DSD_EDITOR_CODELISTS,i&&i()}var o={};return n.prototype.getCodelists=function(){return this.codelists},n.prototype.getFilteredCodelists=function(t){if(!this.codelists)return null;if(!t||"undefined"==t)return this.codelists;for(var e=[],i=0;i<this.codelists.length;i++)this.codelists[i].subject.toLowerCase()==t.toLowerCase()&&e.push(this.codelists[i]);return e},n.prototype.getCodelist=function(t){if(!this.codelists)return null;for(var e=0;e<this.codelists.length;e++)if(this.codelists[e].value==t)return this.codelists[e];return null},n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n;n=function(){"use strict";return{}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){"use strict";return{LANG:"EN",LOCALE:"en_EN",LANGFALLBACKORDER:["EN","FR","ES","AR","PR"],SECONDARY_MENU:{url:"fx-d-m/config/secondary_menu.json",disable:["delete","close","data","dsd"]},DSD_EDITOR_CONTEXT_SYSTEM:"demo1",DSD_EDITOR_DATASOURCES:["D3S"],DSD_EDITOR_SUBJECTS:"submodules/fenix-ui-DSDEditor/config/DSDEditor/Subjects.json",DSD_EDITOR_DATATYPES:"submodules/fenix-ui-DSDEditor/config/DSDEditor/Datatypes.json",DSD_EDITOR_CODELISTS:"config/submodules/DSDEditor/cstat_core_codelists.json",DATA_MANAGEMENT_NOT_LOGGEDIN_URL:"./index.html",FAKE_AUTHENTICATION:!0,CATALOG_BLANK_FILTER:"config/submodules/catalog/uae-catalog-blank-filter.json",SERVICE_BASE_ADDRESS:"http://fenix.fao.org/d3s_fenix/msd",SERVICE_GET_DATA_METADATA:{service:"resources",queryParams:{full:!0,dsd:!0}},SERVICE_GET_METADATA:{service:"resources/metadata",queryParams:{full:!0,dsd:!0}},SERVICE_COPY_METADATA:{service:"resources/metadata",queryParams:{full:!0,dsd:!0,export:!0}},SERVICE_SAVE_METADATA:{service:"resources/metadata"},SERVICE_SAVE_DSD:{service:"resources/dsd"},SERVICE_SAVE_DATA:{service:"resources"},SERVICE_RESOURCES_FIND:{service:"resources/find"}}}.call(e,i,e,t),
!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,o;n=[i(40),i(41)],o=function(t,e){"use strict";return{en:t,fr:e}}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n;n=function(){"use strict";return{yes:"Yes",no:"No",ok:"Ok",cancel:"Cancel",add:"Add",done:"Done",reset:"Reset",delete:"Delete",updated:"Updated",confirmDelete:"Delete?",edit:"Edit",title:"Title",subject:"Subject",domain:"Domain",key:"Key",datatype:"Data type",supplemental:"Supplemental",areYouSure:"Are you sure?",unsavedChanges:"Some changes are not saved, cancel anyway?",select:"Select...",nullColumns:"Columns cannot be empty",atLeast2Cols:"The dataset must have at least 2 columns",atLeastOneKey:"The dataset must have at least one Key",atLeastOneValue:"The dataset must have at least one 'value' subject",nullColumn:"Column cannot be null",empty:"Is empty",DimensionDataTypeConflict:"Conflict detected between value and datatype defined for the value",EmptyIdCodeList:"The codelist's ID cannot be empty",duplicateColumnIDs:"The column's ID must be unique, check your column's IDs",duplicateSubject:"Two columns cannot have the same subject, check your column's subjects",dataType:"Data type",titleBlank:"Title cannot be blank",subjectEmpty:"Subject cannot be empty",dataTypeEmpty:"Datatype cannot be empty",codelistEmpty:"Codelist cannot be empty",dimension:"Dimension",value:"Value",other:"Other",helpDim:"You need at least one dimension, dimensions are used to define your measure.<br/>Ex. Year, product, area...",helpVal:"You need exactly one measure. It is usually a number.<br/>Ex. Quantity, value...",helpOther:"Add additional informations attached to your measure.<br/>Ex. measurement unit, flags, notes..."}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){"use strict";return{yes:"Oui",no:"Non",ok:"Ok",cancel:"Annuler",add:"Ajouter",done:"Terminé",reset:"Reset",delete:"Supprimer",updated:"Mis(e) à jour",confirmDelete:"Supprimer?",edit:"Éditer",title:"Titre",subject:"Sujet",domain:"Domaine",key:"Clé",datatype:"Type de donnée",supplemental:"Supplément",areYouSure:"Êtes-vous sûr?",unsavedChanges:"Certains changements n'ont pas été enregistrés, annuler quand même?",select:"Sélectionner",nullColumns:"Les colonnes ne peuvent pas être vides",atLeast2Cols:"La base de données doit contenir au moins 2 colonnes",atLeastOneKey:"La base de données doit contenir au moins une Clé",atLeastOneValue:"La base de données doit contenir au moins une colonne 'valeur'",nullColumn:"La colonne ne peut pas être nulle",empty:"Est vide(s)",DimensionDataTypeConflict:"Conflit détecté entre la valeur et le type de donnée défini pour la valeur",EmptyIdCodeList:"L'identifiant de la codeliste ne peut pas être vide",duplicateColumnIDs:"L'identifiant de la colonne doit être unique, s'il vous plaît vérifiez les identifiants des vos colonnes",duplicateSubject:"Deux colonnes ne peuvent pas avoir le même sujet, s'il vous plaît vérifier les sujets des vos colonnes",dataType:"[FR] Data type",titleBlank:"[FR] Title cannot be blank",subjectEmpty:"[FR] Subject cannot be empty",dataTypeEmpty:"[FR] Datatype cannot be empty",codelistEmpty:"[FR] Codelist cannot be empty",dimension:"[FR] Dimension",value:"[FR] Value",other:"[FR] Other",helpDim:"[FR] You need at least one dimension, dimensions are used to define your measure.<br/>Ex. Year, product, area...",helpVal:"[FR] You need exactly one measure. It is usually a number.<br/>Ex. Quantity, value...",helpOther:"[FR] Add additional informations attached to your measure.<br/>Ex. measurement unit, flags, notes..."}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,o;n=[i(2),i(56),i(45),i(46),i(48),i(39),i(52),i(54),i(43),i(57),i(29),i(59),i(4),i(30),i(60)],o=function(t,e,i,n,o,a,s,r,d,l,u,c,p,h){function f(e){this.config={},this.$cnt=null,t.extend(!0,this.config,e,m),this.lang=this.config.inputLangs[0]||m.inputLangs[0],this.lang=this.lang.toLowerCase(),this.$txtTitle,this.$txtSupplemental,this.dynRadioSubj,this.mlTitle,this.mlSupplemental,this.dynRadioDataType,this.editorType="",this.colID="",this.valuesField=null,this.domainEditor=new o(this.config),this.columnEditorReader=new s,this.subjectReader=new r,this.datatypeReader=new d,this.dynRadioSubj=null,this.dynRadioDataType=null,this.validator=null,this.editorsVisibilityCfg={subject:!0,domain:!0,datatype:!0}}function y(t,e){"undefined"!=typeof e&&(e?t.show():t.hide())}var m={inputLangs:["EN"]},v={txtTitle:"#txtTitle",txtSupplemental:"#txtSupplemental",trSubj:"#trSubj",tdSubj:"#tdSubj",trDataType:"#trDataType",tdDataType:"#tdDataType",trDomain:"#trDomain",tdDomain:"#tdDomainEditor",tblColEditor:"#tblColEditor",lblTitle:"#lTitle",lblSuppl:"#lSupplemental",lblSubj:"#lSubject",lblDataType:"#lDataType",lblDomain:"#lDomain"},D={dimension:"dimension",value:"value",other:"other"},b={code:"code"},E={SUBJ:"radioSubj",DTYPE:"radioDatatype"};return f.prototype.render=function(e,o){t.extend(!0,this.config,o),this.$cnt=e,this.$cnt.html(i),this.$txtTitle=this.$cnt.find(v.txtTitle),this.$txtSupplemental=this.$cnt.find(v.txtSupplemental),this.$trSubj=this.$cnt.find(v.trSubj);var a=this.$cnt.find(v.tdSubj);this.$trDomain=this.$cnt.find(v.trDomain);var s=this.$cnt.find(v.tdDomain);this.dynRadioSubj=new n,this.dynRadioSubj.render(a),this.$trDataType=this.$cnt.find(v.trDataType);var r=this.$cnt.find(v.tdDataType);this.dynRadioDataType=new n,this.dynRadioDataType.render(r),this.mlTitle=new l({langs:this.config.inputLangs}),this.mlTitle.render(this.$txtTitle),this.mlSupplemental=new l({langs:this.config.inputLangs}),this.mlSupplemental.render(this.$txtSupplemental),this.domainEditor.render(s),this._bindEvents(),this._attachValidator(),this._doML()},f.prototype.setEditMode=function(t){this.editorsVisibilityCfg=t,y(this.$trSubj,t.subject),y(this.$trDomain,t.domain),y(this.$trDataType,t.datatype)},f.prototype.newColumn=function(){this.reset()},f.prototype._subjectChanged=function(t){this.updateDataTypes(this.editorType,t),this.domainEditor.reset()},f.prototype._dataTypeChanged=function(t){this.domainEditor.setMode(t,this.dynRadioSubj.get())},f.prototype.setColumnEditorType=function(t){this.editorType=t;var e=this.columnEditorReader.getColumnTypeSubjects(t);if(!e||0==e.length)return void this._subjectsVisible(!1);for(var i=this.subjectReader.getFilteredSubjects(e),n=[],o=0;o<i.length;o++)n.push({value:i[o].value,text:i[o].text.EN});var a=null;1==n.length?(a=n[0].value,this._subjectsVisible(!1)):this._subjectsVisible(!0),this.dynRadioSubj.setRadios(E.SUBJ,n,a),this.updateDataTypes(t,a)},f.prototype.updateDataTypes=function(t,e){var i=this.columnEditorReader.getSubjectDatatypes(t,e);if(i){for(var n=this.datatypeReader.getFilteredDatatypes(i),o=[],a=0;a<n.length;a++)o.push({value:n[a].value,text:n[a].text.EN});this.dynRadioDataType.setRadios(E.DTYPE,o,"")}},f.prototype.reset=function(){this.colID="",this.valuesField=null,this.mlTitle.reset(),this.mlSupplemental.reset(),this.dynRadioSubj.reset(),this.dynRadioDataType.reset(),this.setColumnEditorType(""),this.domainEditor.reset()},f.prototype._subjectsVisible=function(t){("undefined"==typeof this.editorsVisibilityCfg.subject||this.editorsVisibilityCfg.subject)&&(t?this.$trSubj.show():this.$trSubj.hide())},f.prototype.getColumn=function(){var t={};return t.id=this.colID,this.valuesField&&(t.values=this.valuesField),this.editorType==D.dimension?t.key=!0:t.key=!1,t.subject=this.dynRadioSubj.get(),t.dataType=this.dynRadioDataType.get(),t.title=this.mlTitle.get(),t.supplemental=this.mlSupplemental.get(),t.domain=this.domainEditor.get(),t},f.prototype.setColumn=function(t){this.reset(),this.colID=t.id,this.valuesField=t.values;var e=D.other;t.key?e=D.dimension:"value"==t.subject&&(e=D.value),this.setColumnEditorType(e),this.mlTitle.set(t.title),this.mlSupplemental.set(t.supplemental),this.dynRadioSubj.set(t.subject),this.dynRadioDataType.set(t.dataType),t.dataType==b.code&&this.domainEditor.set(b.code,t.subject,t.domain)},f.prototype._bindEvents=function(){var t=this;h.subscribe(u.DYNAMIC_RADIO_CHANGED,this,function(e,i){i==E.SUBJ?t._subjectChanged(e):i==E.DTYPE&&t._dataTypeChanged(e)})},f.prototype._unbindEvents=function(){h.unsubscribe(u.DYNAMIC_RADIO_CHANGED)},f.prototype._attachValidator=function(){e.info("DSDColumnEditor.prototype._attachValidator");var t=this.$cnt.find(v.tblColEditor);this.validator=t.parsley()},f.prototype._detachValidator=function(){e.info("DSDColumnEditor.prototype._detachValidator"),this.validator.destroy()},f.prototype.validate=function(){e.info("DSDColumnEditor.prototype.validate"),val=new c;var t=val.validateColumn(this.getColumn());return this.updateValidationUI(t),!t||0==t.length},f.prototype.updateValidationUI=function(t){if(e.info("DSDColumnEditor.prototype.updateValidationUI",this.validator,t),this.$cnt.find("#lTitle").parsley().reset(),this.$cnt.find("#lSubject").parsley().reset(),this.$cnt.find("#lDataType").parsley().reset(),this.$cnt.find("#lDomain").parsley().reset(),t)for(var i=0;i<t.length;i++)switch(t[i].message){case p.TITLE_BLANK:this.$cnt.find("#lTitle").parsley().addError("TITLE_BLANK",{message:a[this.lang][p.TITLE_BLANK],assert:"required",updateClass:!0});break;case p.SUBJECT_EMPTY:this.$cnt.find("#lSubject").parsley().addError("SUBJECT_EMPTY",{message:a[this.lang][p.SUBJECT_EMPTY],assert:"required"});break;case p.DATATYPE_EMPTY:this.$cnt.find("#lDataType").parsley().addError("DATATYPE_EMPTY",{message:a[this.lang][p.DATATYPE_EMPTY],assert:"required"});break;case p.CODELIST_EMPTY:this.$cnt.find("#lDomain").parsley().addError("CODELIST_EMPTY",{message:a[this.lang][p.CODELIST_EMPTY],assert:"required"})}},f.prototype.changed=function(){return this.mlTitle.changed()||this.mlSupplemental.changed()||this.domainEditor.changed()||this.dynRadioSubj.changed()||this.dynRadioDataType.changed()},f.prototype._doML=function(){this.$cnt.find(v.lblTitle).html(a[this.lang].title),this.$cnt.find(v.lblSuppl).html(a[this.lang].supplemental),this.$cnt.find(v.lblSubj).html(a[this.lang].subject),this.$cnt.find(v.lblDataType).html(a[this.lang].dataType),this.$cnt.find(v.lblDomain).html(a[this.lang].domain)},f.prototype.destroy=function(){this._unbindEvents(),this._detachValidator(),this.mlTitle.destroy(),this.mlSupplemental.destroy(),this.domainEditor.destroy(),this.dynRadioSubj.destroy(),this.dynRadioDataType.destroy()},f}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(2),i(44)],o=function(t,e){function i(i){this.config={},t.extend(!0,this.config,n,i),this.datatypes=e}var n={};return i.prototype.getDatatypes=function(){return this.datatypes},i.prototype.getFilteredDatatypes=function(t){if(!t)return null;for(var e,i=[],n=0;n<t.length;n++)e=this.getDatatype(t[n]),e&&i.push(e);return i},i.prototype.getDatatype=function(t){for(var e=0;e<this.datatypes.length;e++)if(this.datatypes[e].value==t)return this.datatypes[e];return null},i}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=[{value:"",text:{EN:" ",FR:" "}},{value:"code",text:{EN:"Code",FR:"CodeFR"}},{value:"customCode",text:{EN:"Custom code",FR:"Custom code"}},{value:"date",text:{EN:"Date"}},{value:"month",text:{EN:"Month"}},{value:"year",text:{EN:"Year"}},{value:"number",text:{EN:"Number"}},{value:"text",text:{EN:"Text"}},{value:"percentage",text:{EN:"Percentage"}}]},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<table class="table table-bordered table-nonfluid" id="tblColEditor" data-parsley-validate data-validate="parsley">\n    <tbody>\n        <tr><td><label id="lTitle" for="txtTitle">_Title</label></td><td id="txtTitle"></td></tr>\n        <tr style="display:none;"><td><label id="lSupplemental" for="txtSupplemental">_Supplemental</label></td><td id="txtSupplemental"></td></tr>\n        <tr id="trSubj">\n            <td><label id="lSubject" for="radioSubj">_Subject</label></td>\n            <td id="tdSubj"></td>\n        </tr>\n        <tr id="trDataType">\n            <td><label id="lDataType" for="radioDataType">_Data type</label></td>\n            <td id="tdDataType"></td>\n        <tr id="trDomain">\n            <td><label id="lDomain" for="">_Domain</label></td>\n            <td id="tdDomainEditor"></td>\n        </tr>\n    </tbody>\n</table>\n'},useData:!0})},function(t,e,i){var n,o;n=[i(2),i(47),i(29),i(30)],o=function(t,e,i,n){function o(e){this.config={},this.$container=null,t.extend(!0,this.config,a,e),this.groupName=null,this.radioSettings,this.$radioGroup,this._changed=!1}var a={},s={radioChanged:i.DYNAMIC_RADIO_CHANGED};o.prototype.render=function(e,i){t.extend(!0,this.config,i),this.$container=e},o.prototype.setRadios=function(t,e,i){if(this.groupName=t,this.radioSettings=e,this.$container.html(""),e&&0!=e.length){for(var n=0;n<e.length;n++)this.$container.append(r(t,e[n],i));this.$radioGroup=this.$container.find("input[name="+t+"]:radio"),this._bindEvents()}};var r=function(i,n,o){var a=d(i,n.value),s=t(e);return s.find("label").text(n.text),s.find("label").attr("for",a),s.find("input").val(n.value),s.find("input").attr("name",i),s.find("input").attr("id",a),s.prop("required",!0),o&&n.value==o&&s.find("input").attr("checked","checked"),s},d=function(t,e){return"rd"+t+"_"+e};return o.prototype.get=function(){return this.$radioGroup&&this.$radioGroup.filter(":checked")?this.$radioGroup.filter(":checked").val():null},o.prototype.set=function(t){if(this.reset(),t){var e=this.$container.find("#"+d(this.groupName,t));e.prop("checked",!0),n.publish(s.radioChanged,t,this.groupName)}},o.prototype.reset=function(){this.$radioGroup&&(this.$radioGroup.removeAttr("checked"),this._changed=!1)},o.prototype._bindEvents=function(){var e=this;t(this.$radioGroup.on("change",function(){var t=e.$container.find("input[name="+e.groupName+"]:checked").val();n.publish(s.radioChanged,t,e.groupName),e._changed=!0}))},o.prototype._unbindEvents=function(){this.$radioGroup&&this.$radioGroup.off("change")},o.prototype.changed=function(){return this._changed},o.prototype.destroy=function(){this._unbindEvents()},o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<span><input type="radio" name="" value="" style="display:none" /><label></label></span>'},useData:!0})},function(t,e,i){var n,o;n=[i(2),i(49),i(50),i(30)],o=function(t,e,i,n){function o(e){this.config={},this.$container=null,t.extend(!0,this.config,a,e),this.mode="",this.$divNoDatatype=null,this.$divNoDomain=null,this.$divDomainEditor=null,this.codelistSelector=null,this._changed=!1}var a={},s={idNoDataType:"#domEdit_noDatatype",idNoDomain:"#domEdit_noDomain",idEditor:"#domEdit_editor"},r={code:"code",year:"year",month:"month",date:"date",customCode:"customCode"};return o.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$divNoDatatype=this.$container.find(s.idNoDataType),this.$divNoDomain=this.$container.find(s.idNoDomain),this.$divDomainEditor=this.$container.find(s.idEditor),this.$divNoDatatype.show(),this.$divNoDomain.hide(),this.$divDomainEditor.hide(),this._bindEvents()},o.prototype.set=function(t,e,i){switch(this._changed=!1,this.setMode(t,e),this.mode){case r.code:this.codelistSelector.set(e,i.codes);break;case r.year:case r.month:case r.date:}},o.prototype.get=function(){switch(this.mode){case r.code:return{codes:[this.codelistSelector.get()]};case r.year:case r.month:case r.date:}},o.prototype.reset=function(){this.setMode(""),this._changed=!1},o.prototype.setMode=function(t,e){if(this.mode!=t)switch(this.mode=t,this.$divDomainEditor.empty(),this.$divDomainEditor.hide(),this.$divNoDomain.hide(),this.$divNoDatatype.hide(),this.codelistSelector&&this.codelistSelector.destroy(),this.codelistSelector=null,t){case"":this.$divNoDatatype.show();break;case r.code:this.$divDomainEditor.show(),this.codelistSelector=new i(this.config),this.codelistSelector.render(this.$divDomainEditor),this.codelistSelector.setSubject(e);break;case r.year:case r.month:case r.date:this.$divDomainEditor.show();break;case r.customCode:break;default:this.$divNoDomain.show()}},o.prototype._bindEvents=function(){},o.prototype._unbindEvents=function(){},o.prototype.changed=function(){return this._changed},o.prototype.destroy=function(){this.codelistSelector&&this.codelistSelector.destroy(),this._unbindEvents()},o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<div id="domEdit_noDatatype">Select a data type</div>\n<div id="domEdit_noDomain">No limit for this data type</div>\n<div id="domEdit_editor"></div>'},useData:!0})},function(t,e,i){var n,o;n=[i(2),i(51),i(36),i(29),i(30)],o=function(t,e,i,n,o){function a(e){this.config={},this.$container=null,t.extend(!0,this.config,e,s),this.clReader=null,this.tmpVal="",this.tmpSubj="",this.loaded=!1}var s={},r={idCodesDDL:"#clSelDDL"},d={ddlChange:n.CODELIST_SELECTOR_CHANGED},l="EN";return a.prototype.render=function(n,o){t.extend(!0,this.config,o),this.$container=n,this.$container.html(e),this.$clDDl=this.$container.find(r.idCodesDDL),this._bindEvents();var a=this;this.clReader=new i(this.config,function(){a._clLoaded()})},a.prototype._clLoaded=function(){return this.loaded=!0,""!=this.tmpVal?void this.set(this.tmpSubj,this.tmpVal):void(""!=this.tmpSubj&&this.setSubject(this.tmpSubj))},a.prototype.setSubject=function(e){if(!this.loaded)return void(this.tmpSubj=e);var i=this.clReader.getFilteredCodelists(e),n=this.$clDDl.val();if(this.$clDDl.find("option").remove(),i){this.$clDDl.append(t("<option>",{value:"",text:""}));for(var o=0;o<i.length;o++)this.$clDDl.append(t("<option>",{value:i[o].value,text:i[o].text[l]}));1==i.length?this.$clDDl.val(i[0].value):n&&this.$clDDl.val(selected)}},a.prototype.reset=function(){this.$clDDl.find("option").remove()},a.prototype.set=function(t,e){if(!this.loaded)return this.tmpSubj=t,void(this.tmpVal=e);if(this.setSubject(t),!e||0==e.length)return void this.$clDDl.val("");var i=e[0].idCodeList;e[0].version&&(i=i+"|"+e[0].version),this.$clDDl.val(i)},a.prototype.get=function(){var t=this.$clDDl.val();if(""==t)return null;var e=t.split("|");return e[1]?{idCodeList:e[0],version:e[1]}:{idCodeList:e[0]}},a.prototype._bindEvents=function(){var t=this;this.$clDDl.on("change",function(e){o.publish(d.ddlChange,t.$clDDl.val())})},a.prototype._unbindEvents=function(){this.$clDDl.off("change")},a.prototype.destroy=function(){this._unbindEvents()},a}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<select id="clSelDDL" class="form-control"></select>'},useData:!0})},function(t,e,i){var n,o;n=[i(2),i(53)],o=function(t,e){function i(i){this.config={},t.extend(!0,this.config,n,i),this.columnECfg=e}var n={};return i.prototype.getColumnEditorCfg=function(){return this.columnECfg},i.prototype.getColumnTypeSubjects=function(t){if(!this.columnECfg[t])return null;for(var e=[],i=0;i<this.columnECfg[t].length;i++)e.push(this.columnECfg[t][i].subject);return e},i.prototype.getSubjectDatatypes=function(t,e){if(!this.columnECfg[t])return null;for(var i=0;i<this.columnECfg[t].length;i++)if(this.columnECfg[t][i].subject==e)return this.columnECfg[t][i].datatypes;return null},i}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports={dimension:[{subject:"item",datatypes:["code"]},{subject:"indicator",datatypes:["code"]},{subject:"gender",datatypes:["code"]},{subject:"residence",datatypes:["code"]},{subject:"food",datatypes:["code"]},{subject:"sector",datatypes:["code"]},{subject:"fieldManagement",datatypes:["code"]},{subject:"agriculturalPopulation",datatypes:["code"]},{subject:"census",datatypes:["code"]},{subject:"time",datatypes:["year","month","date"]},{subject:"geo",datatypes:["code"]},{subject:"undefined",datatypes:["code","year"]}],value:[{subject:"value",datatypes:["number","text"]}],other:[{subject:"flag",datatypes:["code","text"]},{subject:"um",datatypes:["code"]}]}},function(t,e,i){var n,o;n=[i(2),i(55)],o=function(t,e){function i(i){this.config={},t.extend(!0,this.config,n,i),this.subjs=e}var n={};return i.prototype.getSubjects=function(){return this.subjs},i.prototype.getFilteredSubjects=function(t){if(!t)return null;for(var e,i=[],n=0;n<t.length;n++)e=this.getSubject(t[n]),e&&i.push(e);return i},i.prototype.getSubject=function(t){for(var e=0;e<this.subjs.length;e++)if(this.subjs[e].value==t)return this.subjs[e];return null},i}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=[{value:"item",text:{EN:"Item"},codelistSubject:"item"},{value:"indicator",text:{EN:"Indicator"},codelistSubject:"indicator"},{value:"gender",text:{EN:"Gender"},codelistSubject:"gender"},{value:"residence",text:{EN:"Residence"},codelistSubject:"residence"},{value:"food",text:{EN:"Food"},codelistSubject:"food"},{value:"sector",text:{EN:"Sector"},codelistSubject:"sector"},{value:"fieldManagement",text:{EN:"Field Management"},codelistSubject:"fieldManagement"},{value:"agriculturalPopulation",text:{EN:"Agricultural"},codelistSubject:"agriculturalPopulation"},{value:"census",text:{EN:"Census"},codelistSubject:"census"},{value:"time",text:{EN:"Time"}},{value:"geo",text:{EN:"Geo"},codelistSubject:"geo"},{value:"flag",text:{EN:"Flag"},codelistSubject:"flag"},{value:"value",text:{EN:"Value"}},{value:"um",text:{EN:"UM"},codelistSubject:"um"}]},function(t,e){t.exports=i},function(t,e,i){var n,o;n=[i(56),i(2),i(58)],o=function(t,e,i){function n(t){this.config={},this.$container=null,e.extend(!0,this.config,a,t),this.$tblMLInput=null,this.txt=[],this._changed=!1}function o(t){var e=s.replace("%lCode%",t);return e=e.replace("%idlCode%",r+""+t)}var a={langs:["EN"]},s='<tr><td>%lCode%</td><td><input type="text" id="%idlCode%" class="form-control" /></td></tr>',r="mlTD_",d={idTblMLInput:"#tblMLInput"};return n.prototype.render=function(t,n){e.extend(!0,this.config,n),this.$container=t,this.$container.html(i),this.$tblMLInput=this.$container.find(d.idTblMLInput),this._create(this.config.langs),this.bindEvents()},n.prototype._create=function(t){if(!t)return"";for(var e="",i=0;i<t.length;i++)e+=o(t[i]);for(this.$tblMLInput.html(e),this.txt=[],i=0;i<t.length;i++)this.txt.push(this.$tblMLInput.find("#"+r+t[i]))},n.prototype.set=function(t){if(this.reset(),t)for(var e=0;e<this.config.langs.length;e++)t[this.config.langs[e]]&&this.txt[e].val(t[this.config.langs[e]])},n.prototype.get=function(){if(!this.txt)return null;for(var t={},e="",i=0;i<this.config.langs.length;i++)e=this.txt[i].val().trim(),e&&(t[this.config.langs[i].toUpperCase()]=e);return t},n.prototype.reset=function(){if(this.txt){for(var t=0;t<this.txt.length;t++)this.txt[t].val("");this._changed=!1}},n.prototype.isEmpty=function(){var t=this.get();return!!e.isEmptyObject(t)},n.prototype.bindEvents=function(){if(this.txt)for(var t=this,e=0;e<this.txt.length;e++)this.txt[e].on("keyup",function(){t._changed=!0})},n.prototype.unbindEvents=function(){if(this.txt)for(var t=0;t<this.txt.length;t++)this.txt[t].off("keyup")},n.prototype.changed=function(){return this._changed},n.prototype.destroy=function(){this.unbindEvents()},n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n=i(6);t.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(t,e,i,n,o){return'<table>\n    <tbody id="tblMLInput">\n    </tbody>\n</table>\n'},useData:!0})},function(t,e,i){var n,o;n=[i(2),i(56),i(4)],o=function(t,e,i){function n(i){e.info("Validator_DSD"),this.config={},t.extend(!0,this.config,c,i)}function o(e){return t.isEmptyObject(e)?{field:"title",level:p.ERROR,message:i.TITLE_BLANK}:null}function a(t,e){if(!t.key)return null;if(!t.dataType)return null;for(var n=0;n<e.length;n++)if(t.dataType==e[n])return null;return{field:"dimension",level:p.ERROR,message:i.DIMENSION_DATATYPE_ERROR}}function s(t){return t.key?t.subject?void 0:{field:"subject",level:p.ERROR,message:i.SUBJECT_EMPTY}:null}function r(t){if(!t.dataType)return{field:"dataType",level:p.ERROR,message:i.DATATYPE_EMPTY}}function d(t){return t.dataType?"code"!=t.dataType||t.domain&&t.domain.codes&&t.domain.codes[0]&&t.domain.codes[0].idCodeList?void 0:{field:"domain",level:p.ERROR,message:i.CODELIST_EMPTY}:null}function l(t){var e=[];if(!t)return e.push({level:p.ERROR,message:i.NULL_COLUMNS}),e;if(t.length<2)return e.push({level:p.ERROR,message:i.AT_LEAST_2_COLS}),e;for(var n=0;n<t.length-1;n++)for(var o=n+1;o<t.length;o++)t[n].id==t[o].id&&e.push({level:p.ERROR,message:i.DUPLICATE_IDS});var a=0,s=0;for(n=0;n<t.length;n++)t[n].key&&a++,t[n].subject&&"value"==t[n].subject&&s++;return a<1&&e.push({level:p.ERROR,message:i.AT_LEAST_1_KEY}),s<1&&e.push({level:p.ERROR,message:i.AT_LEAST_1_VALUE}),e}function u(t,e){e&&(t||(t=[]),e instanceof Array?Array.prototype.push.apply(t,e):t.push(e))}var c={allowedKeyDataTypes:["code","customCode","date","month","year"]},p={ERROR:"error"};return n.prototype.validateColumn=function(t){var e=[];return t?(u(e,o(t.title)),u(e,a(t,this.config.allowedKeyDataTypes)),u(e,s(t)),u(e,r(t)),u(e,d(t)),e):(e.push({level:p.ERROR,message:i.NULL_COLUMN}),e)},n.prototype.validateColumns=function(t){var e=[],i=l(t);if(u(e,i),!t)return e;for(var n=0;n<t.length;n++){var o=this.validateColumn(t[n]);u(e,o)}return e},n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=n},function(t,e,i){var n,o;n=[],o=function(){var t=function(){};return t.prototype.generate=function(t,e){var i="OTHER";return e.key?i="DIMENSION":"value"==e.subject&&(i="VALUE"),this._generate(t,i)},t.prototype._generate=function(t,e){if(!t)return"";for(var i=e.toUpperCase(),n=0,o=!0;o;){o=!1;for(var a=i+""+n,s=0;s<t.length;s++)if(t[s].id==a){o=!0,n++;break}}return i+""+n},t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){}])});
//# sourceMappingURL=fenix-ui-DSDEditor.min.js.map