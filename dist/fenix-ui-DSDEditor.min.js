define(["jquery","amplify-pubsub","loglevel","parsleyjs"],function(t,e,i,n){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){var n,o;n=[i(2),i(3)],o=function(t,e){function i(i,n,o){t.extend(!0,c,u,n),this.DSDE=new e(c),this.DSDE.render(t(i),c,o)}function n(t){this.DSDE.set(t)}function o(){return this.DSDE.get()}function s(){return this.DSDE.validate()}function d(t){this.DSDE.editable(t)}function a(){this.DSDE.reset()}function l(){this.DSDE.destroy()}function r(){return this.DSDE.hasChanged()}var u={},c={};return{init:i,set:n,get:o,validate:s,editable:d,reset:a,destroy:l,hasChanged:r}}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(e,i){e.exports=t},function(t,e,i){var n,o;n=[i(2),i(37),i(5),i(6),i(23),i(42),i(10),i(40),i(4),i(18),i(19),i(20),i(11)],o=function(t,e,n,o,s,d,a,l,r,u,c,h,p){function f(e){this.config={},this.$container=null,t.extend(!0,this.config,m,e),this.lang=this.config.lang.toLowerCase(),this.$divDSDDisplay,this.$divColEditor,this.dsd=[],this.DSDDisplay,this.colEditor,this.changed=!1}function y(t,e){if(!t)return-1;for(var i=0;i<t.length;i++)if(t[i].id==e)return i;return-1}function D(t,e){var i=y(t,e);return i==-1?null:t[i]}var m={},v={divDSD:"#divDSD",divColEditor:"#divColEditor",divColEditorCnt:"#divColEditorCnt",btnAddDimension:"#btnAddDimension",btnAddValue:"#btnAddValue",btnAddOther:"#btnAddOther",btnColEditorOk:"#btnColEditorOk",btnColEditorCancel:"#btnColEditorCancel"},b={dimension:"dimension",value:"value",other:"other"},E={DSDEDITOR_TO_COLUMN_EDITOR:"fx.DSDEditor.toColumnEditor",DSDEDITOR_TO_COLUMN_SUMMARY:"fx.DSDEditor.toColumnSummary"};return f.prototype.render=function(d,a,l){t.extend(!0,this.config,a),this.$container=d,this.$container.html(n),i(43),this.$divDSDDisplay=this.$container.find(v.divDSD),this.$divColEditor=this.$container.find(v.divColEditor),this.DSDDisplay=new o(this.config),this.DSDDisplay.render(this.$divDSDDisplay),this.colEditor=new s(this.config);var r=this.$container.find(v.divColEditorCnt);this.colEditor.render(r),this.$divColEditor.hide(),this._bindEvents(),e.info("DSDEditor init with ",this.config),l&&l()},f.prototype.set=function(t){e.info("DSD Set",t),this.dsd=t,this.updateDSDView()},f.prototype.get=function(){return this.dsd},f.prototype.switchVisibility=function(t){t==v.divColEditor?(this.$divDSDDisplay.hide(),this.$divColEditor.show(),p.publish(E.DSDEDITOR_TO_COLUMN_EDITOR)):t==v.divDSD&&(this.$divColEditor.hide(),this.$divDSDDisplay.show(),p.publish(E.DSDEDITOR_TO_COLUMN_SUMMARY))},f.prototype.addColumn=function(t){this.switchVisibility(v.divColEditor),this.colEditor.newColumn(),this.colEditor.setColumnEditorType(t)},f.prototype.editColumn=function(t){this.switchVisibility(v.divColEditor),this.colEditor.setColumn(t)},f.prototype.colEditDone=function(){var t=this.colEditor.getColumn();this.dsd||(this.dsd=[]),""==t.id&&(t.id=(new d).generate(this.dsd,t));var i=y(this.dsd,t.id);e.info(i,this.dsd,typeof this.dsd,t),i==-1?this.dsd.push(t):this.dsd[i]=t,this._sortColumnsByType(),this.updateDSDView(),this.changed=!0},f.prototype._sortColumnsByType=function(){this.dsd.sort(function(t,e){return t.key&&e.key?0:t.key?-1:e.key?1:"value"==t.subject&&"value"==e.subject?0:"value"==t.subject?-1:"value"==e.subject?1:0})},f.prototype.updateDSDView=function(){this.DSDDisplay.setCols(this.dsd)},f.prototype._colAddClick=function(t){"addDim"==t?this.addColumn(b.dimension):"addVal"==t?this.addColumn(b.value):"addOther"==t&&this.addColumn(b.other)},f.prototype.reset=function(){this.initDSD(),this.updateDSDView(),this.changed=!1},f.prototype.hasChanged=function(){return this.changed},f.prototype._bindEvents=function(){var t=this;p.subscribe(a.COLUMN_CLICK_ADD,this,t._colAddClick),this.$container.find(v.btnColEditorOk).on("click",function(){var e=t.colEditor.validate();e&&(t.colEditDone(),t.switchVisibility(v.divDSD))}),this.$container.find(v.btnColEditorCancel).on("click",function(){t.colEditor.changed()&&!confirm(h[t.lang].unsavedChanges)||(t.colEditor.reset(),t.switchVisibility(v.divDSD))}),p.subscribe(a.COLUMN_CLICK_EDIT,this,t._colDisplayEditClicked),p.subscribe(a.COLUMN_CLICK_DELETE,this,t._colDisplayDeleteClicked)},f.prototype._unbindEvents=function(){p.unsubscribe(a.COLUMN_CLICK_ADD,this._colAddClick),this.$container.find(v.btnColEditorOk).off("click"),this.$container.find(v.btnColEditorCancel).off("click"),p.unsubscribe(a.COLUMN_CLICK_EDIT,this._colDisplayEditClicked),p.unsubscribe(a.COLUMN_CLICK_DELETE,this._colDisplayDeleteClicked)},f.prototype.destroy=function(){this._unbindEvents(),this.DSDDisplay.destroy(),this.colEditor.destroy()},f.prototype._colDisplayEditClicked=function(t){var e=D(this.dsd,t);this.editColumn(e)},f.prototype._colDisplayDeleteClicked=function(t){if(!confirm(h[this.lang].areYouSure))return!1;var e=y(this.dsd,t);e!=-1&&this.dsd.splice(e,1),this.updateDSDView(),this.changed=!0},f.prototype.editable=function(t){t?this.colEditor.setEditMode({subject:!0,domain:!0,datatype:!0}):this.colEditor.setEditMode({subject:!1,domain:!1,datatype:!1}),this.DSDDisplay.isEditable(t)},f.prototype.validate=function(){var t=new l,e=t.validateColumns(this.get());return this.updateValidationUI(e),!e||0==e.length},f.prototype.isValid=function(){var t=new l,e=t.validateColumns(this.get());return!e||0==e.length},f.prototype.updateValidationUI=function(t){if(t)for(var i=0;i<t.length;i++)e.warn(t[i].message)},f}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[],o=function(){"use strict";var t={NULL_COLUMN:"nullColumn",TITLE_BLANK:"titleBlank",DIMENSION_DATATYPE_ERROR:"dimnsionDataTypeError",SUBJECT_EMPTY:"subjectEmpty",DATATYPE_EMPTY:"dataTypeEmpty",CODELIST_EMPTY:"codelistEmpty",NULL_COLUMNS:"nullColumns",AT_LEAST_2_COLS:"atLeast2Cols",DUPLICATE_IDS:"duplicateIDs",AT_LEAST_1_KEY:"atLeast1Key",AT_LEAST_1_VALUE:"atLeast1Value",DUPLICATE_SUBJECTS:"duplicateSubjects"};return t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports='<div id=divDSD> </div> <div id=divColEditor> <div id=divColEditorCnt> </div> <button id=btnColEditorOk class="btn btn-default"><span class="glyphicon glyphicon-ok"></span></button> <button id=btnColEditorCancel class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button> </div>'},function(t,e,i){var n,o;n=[i(2),i(7),i(8),i(12),i(20)],o=function(t,e,i,n,o){function s(e){this.config={},this.$container=null,t.extend(!0,this.config,d,e),this.$tdAddDim=null,this.$tdAddVal=null,this.$tdAddOther=null,this.$colsDisplay=null,this.lang=this.config.lang.toLowerCase(),this.addColBtnDim=new i(this.config),this.addColBtnVal=new i(this.config),this.addColBtnOther=new i(this.config),this.colsDisplay=new n(this.config)}var d={},a={idTDAddDim:"#tdAddDim",idTDAddVal:"#tdAddVal",idTDAddOther:"#tdAddOther",idColsDisplay:"#colsDisplay",idTblAddCol:"#tblAddCol"};return s.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$tdAddDim=this.$container.find(a.idTDAddDim),this.$tdAddVal=this.$container.find(a.idTDAddVal),this.$tdAddOther=this.$container.find(a.idTDAddOther),this.$colsDisplay=this.$container.find(a.idColsDisplay),this.addColBtnDim.render(this.$tdAddDim),this.addColBtnVal.render(this.$tdAddVal),this.addColBtnOther.render(this.$tdAddOther),this.addColBtnDim.set({title:o[this.lang].dimension,help:o[this.lang].helpDim,evtId:"addDim",headerClass:"bg-dim"}),this.addColBtnVal.set({title:o[this.lang].value,help:o[this.lang].helpVal,evtId:"addVal",headerClass:"bg-val"}),this.addColBtnOther.set({title:o[this.lang].other,help:o[this.lang].helpOther,evtId:"addOther",headerClass:"bg-other"}),this.colsDisplay.render(this.$colsDisplay),this._bindEvents()},s.prototype.setCols=function(t){this.reset(),this.colsDisplay.set(t)},s.prototype.reset=function(){this.colsDisplay.reset()},s.prototype._bindEvents=function(){},s.prototype._unbindEvents=function(){},s.prototype.destroy=function(){this.addColBtnDim.destroy(),this.addColBtnVal.destroy(),this.addColBtnOther.destroy(),this.colsDisplay.destroy()},s.prototype.isEditable=function(t){if("boolean"==typeof t)return"function"==typeof this.colsDisplay.editable&&this.colsDisplay.editable(t),t?this.$container.find(a.idTblAddCol).show():this.$container.find(a.idTblAddCol).hide(),t},s}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports="<table id=tblAddCol class=table> <tbody> <tr> <td id=tdAddDim class=cTdDim></td> <td id=tdAddVal class=cTdVal></td> <td id=tdAddOther class=cTdOther></td> </tr> </tbody> </table> <div id=colsDisplay></div>"},function(t,e,i){var n,o;n=[i(2),i(9),i(10),i(11)],o=function(t,e,i,n){function o(e){this.config={},this.$container=null,t.extend(!0,this.config,s,e),this.evtId="",this.$btnAddColTitle=null,this.$btnAdd=null,this.$tdAddColButton_help=null}var s={},d={idBtnAddColTitle:"#btnAddColButtonTitle",idBtnAdd:"#btnAdd",idTdAddColButton_help:"#tdAddColButton_help",idAddColH:"#addColH"},a={addColButton_btnClick:i.COLUMN_CLICK_ADD};return o.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$btnAddColTitle=this.$container.find(d.idBtnAddColTitle),this.$btnAdd=this.$container.find(d.idBtnAdd),this.$tdAddColButton_help=this.$container.find(d.idTdAddColButton_help),this._bindEvents()},o.prototype.set=function(t){t&&(t.title&&this.setTitle(t.title),t.help&&this.setHelp(t.help),t.evtId&&this.setEvtId(t.evtId),t.headerClass&&this.$container.find(d.idAddColH).addClass(t.headerClass))},o.prototype.setTitle=function(t){this.$btnAddColTitle.html(t)},o.prototype.setHelp=function(t){this.$tdAddColButton_help.html(t)},o.prototype.setEvtId=function(t){this.evtId=t},o.prototype.reset=function(){this.setTitle(""),this.setHelp("")},o.prototype._bindEvents=function(){var t=this;this.$btnAdd.on("click",function(){n.publish(a.addColButton_btnClick,t.evtId)})},o.prototype._unbindEvents=function(){this.$btnAdd.off("click")},o.prototype.destroy=function(){this._unbindEvents()},o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports='<table class="table roundBorder"> <thead> <tr id=addColH> <th class=btnAddColHead> <span id=btnAddColButtonTitle></span> <br/> <button id=btnAdd type=button class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></button> </th> </tr> </thead> <tbody> <tr> <td id=tdAddColButton_help></td> </tr> </tbody> </table>'},function(t,e,i){var n,o;n=[],o=function(){"use strict";var t={CODELIST_SELECTOR_CHANGED:"fx.CodelistSelector.chaged",DYNAMIC_RADIO_CHANGED:"fx.DynamicRadio.chaged",COLUMN_CLICK_ADD:"fx.addColButton.btnClick",COLUMN_CLICK_EDIT:"fx.coldisplay.edit",COLUMN_CLICK_DELETE:"fx.coldisplay.delete"};return t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,i){t.exports=e},function(t,e,i){var n,o;n=[i(2),i(13),i(14),i(15),i(17)],o=function(t,e,i,n,o){function s(e){this.config={},this.$container=null,t.extend(!0,this.config,a,e),this.$trHead=null,this.$trEdit=null,this.$trSubj=null,this.$trDataType=null,this.$trDomain=null,this.editBtns=[],this.editable}function d(t){var e=(90/t.length,r.colTH);return e=e.replace("%cnt%",u.MLStringToString(t.title,"<br/>")),e=t.key?e.replace("%cl%","bg-dim"):"value"==t.subject?e.replace("%cl%","bg-val"):e.replace("%cl%","bg-other")}var a={lang:"EN"},l={idTrHead:"#trColInfoHead",idTrEdit:"#trEdit",idTrSubj:"#trSubj",idTrDataType:"#trDataType",idTrDomain:"#trDomain",idTrSuppl:"#trSuppl"},r={colTH_empty:'<th style="width:10%"></th>',colTD_empty:"<td></td>",colTH:'<th class="%cl%">%cnt%</th>',colTD_Edit:'<td><div id="%id%"></div></td>',colTD:"<td>%cnt%</td>",colSubj:'<td class="text-muted">Subject</td>',colDataType:'<td class="text-muted">Data type</td>',colDomain:'<td class="text-muted">Domain</td>',colSuppl:'<td class="text-muted">Supplemental</td>'},u=new i;return s.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$trHead=this.$container.find(l.idTrHead),this.$trEdit=this.$container.find(l.idTrEdit),this.$trSubj=this.$container.find(l.idTrSubj),this.$trDataType=this.$container.find(l.idTrDataType),this.$trDomain=this.$container.find(l.idTrDomain),this.$trSuppl=this.$container.find(l.idTrSuppl),this._bindEvents()},s.prototype.set=function(t){this.reset(),t&&(this._createHeader(t),this._createEditRow(t),this._createRows(t))},s.prototype._createHeader=function(t){if(!t)return"";for(var e=r.colTH_empty,i=0;i<t.length;i++)e+=d(t[i]);this.$trHead.html(e)},s.prototype._createEditRow=function(t){if(t){for(var e=r.colTD_empty,i="tdEdit_",o=0;o<t.length;o++)e+=r.colTD_Edit.replace("%id%",i+""+t[o].id);for(this.$trEdit.html(e),this.editBtns=[],o=0;o<t.length;o++){var s="#"+i+t[o].id,d=this.$trEdit.find(s),a=new n(this.config);a.render(d),a.setEventId(t[o].id),a.deleteEnabled(this.editable),this.editBtns.push(a)}}},s.prototype._createRows=function(t){if(!t)return"";for(var e=r.colSubj,i=r.colDataType,n=r.colDomain,o=r.colSuppl,s=0;s<t.length;s++)e+=this._createColTD(t[s],"subject",this.config.lang),i+=this._createColTD(t[s],"dataType",this.config.lang),n+=this._createColTD(t[s],"domain",this.config.lang),o+=this._createColTD(t[s],"supplemental",this.config.lang);this.$trSubj.html(e),this.$trDataType.html(i),this.$trDomain.html(n),this.$trSuppl.html(o)},s.prototype._createColTD=function(t,e,i){var n=r.colTD;switch(e){case"subject":n=t.subject?n.replace("%cnt%",t.subject):n.replace("%cnt%","");break;case"dataType":n=t.dataType?n.replace("%cnt%",t.dataType):n.replace("%cnt%","");break;case"domain":n=t.domain?n.replace("%cnt%",this._domainToString(t.domain,i)):n.replace("%cnt%","");break;case"supplemental":n=t.supplemental?n.replace("%cnt%",u.MLStringToString(t.supplemental,"<br/>")):n.replace("%cnt%","")}return n},s.prototype._domainToString=function(t,e){if(t.codes&&t.codes[0]){var i=t.codes[0].idCodeList;t.codes[0].version&&(i+="|"+t.codes[0].version);var n=new o(this.config),s=n.getCodelist(i);return s?s.text[e]:""}return""},s.prototype.reset=function(){this.$trHead.html(""),this.$trSubj.html(""),this.$trDataType.html(""),this.$trDomain.html(""),this.$trSuppl.html(""),this.editBtns=[]},s.prototype.editable=function(t){if(this.editable=t,this.editBtns)for(var e=0;e<this.editBtns.length;e++)this.editBtns[e].deleteEnabled(t);return t},s.prototype._bindEvents=function(){},s.prototype._unbindEvents=function(){},s.prototype.destroy=function(){if(this.editBtns)for(var t=0;t<this.editBtns.length;t++)this.editBtns[t].destroy()},s}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports='<table class="table table-bordered"> <thead> <tr id=trColInfoHead></tr> </thead> <tbody> <tr id=trEdit></tr> <tr id=trSubj></tr> <tr id=trDataType></tr> <tr id=trDomain></tr> <tr id=trSuppl style=display:none></tr> </tbody> </table>'},function(t,e,i){var n,o;n=[],o=function(){var t=function(){};return t.prototype.MLStringToString=function(t,e){if(!t)return"";var i="";for(var n in t)i+=n+": "+t[n]+e;return i=i.substring(0,i.length-e.length)},t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(2),i(16),i(10),i(11)],o=function(t,e,i,n){function o(e){this.config={},this.$container=null,t.extend(!0,this.config,s,e),this.$btnEdit=null,this.$btnDel=null,this.evtId=""}var s={},d={idBtnEdit:"#colsDisplayColEdit",idBtnDel:"#colsDisplayColDel"},a={clickEdit:i.COLUMN_CLICK_EDIT,clickDelete:i.COLUMN_CLICK_DELETE};return o.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$btnEdit=this.$container.find(d.idBtnEdit),this.$btnDel=this.$container.find(d.idBtnDel),this._bindEvents()},o.prototype.deleteEnabled=function(t){"undefined"!=typeof t&&(t?this.$btnDel.prop("disabled",!1):this.$btnDel.prop("disabled",!0))},o.prototype.setEventId=function(t){this.evtId=t},o.prototype._bindEvents=function(){var t=this;this.$btnEdit.on("click",function(){n.publish(a.clickEdit,t.evtId)}),this.$btnDel.on("click",function(){n.publish(a.clickDelete,t.evtId)})},o.prototype._unbindEvents=function(){this.$btnEdit.off("click"),this.$btnDel.off("click")},o.prototype.destroy=function(){this._unbindEvents()},o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports='<button id=colsDisplayColEdit class="btn btn-primary"><span class="glyphicon glyphicon-pencil"></span> </button> <button id=colsDisplayColDel class="btn btn-primary"><span class="glyphicon glyphicon-trash"></span> </button>'},function(t,e,i){var n,o;n=[i(2),i(18),i(19)],o=function(t,e,i){function n(e,i){this.config={},t.extend(!0,this.config,e,o),this.codelists=this.config.DSD_EDITOR_CODELISTS,i&&i()}var o={};return n.prototype.getCodelists=function(){return this.codelists},n.prototype.getFilteredCodelists=function(t){if(!this.codelists)return null;if(!t||"undefined"==t)return this.codelists;for(var e=[],i=0;i<this.codelists.length;i++)this.codelists[i].subject.toLowerCase()==t.toLowerCase()&&e.push(this.codelists[i]);return e},n.prototype.getCodelist=function(t){if(!this.codelists)return null;for(var e=0;e<this.codelists.length;e++)if(this.codelists[e].value==t)return this.codelists[e];return null},n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n;n=function(){"use strict";return{}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){"use strict";return{LANG:"EN",LOCALE:"en_EN",LANGFALLBACKORDER:["EN","FR","ES","AR","PR"],SECONDARY_MENU:{url:"fx-d-m/config/secondary_menu.json",disable:["delete","close","data","dsd"]},DSD_EDITOR_CONTEXT_SYSTEM:"demo1",DSD_EDITOR_DATASOURCES:["D3S"],DSD_EDITOR_SUBJECTS:"submodules/fenix-ui-DSDEditor/config/DSDEditor/Subjects.json",DSD_EDITOR_DATATYPES:"submodules/fenix-ui-DSDEditor/config/DSDEditor/Datatypes.json",DSD_EDITOR_CODELISTS:"config/submodules/DSDEditor/cstat_core_codelists.json",DATA_MANAGEMENT_NOT_LOGGEDIN_URL:"./index.html",FAKE_AUTHENTICATION:!0,CATALOG_BLANK_FILTER:"config/submodules/catalog/uae-catalog-blank-filter.json",SERVICE_BASE_ADDRESS:"http://fenix.fao.org/d3s_fenix/msd",SERVICE_GET_DATA_METADATA:{service:"resources",queryParams:{full:!0,dsd:!0}},SERVICE_GET_METADATA:{service:"resources/metadata",queryParams:{full:!0,dsd:!0}},SERVICE_COPY_METADATA:{service:"resources/metadata",queryParams:{full:!0,dsd:!0,"export":!0}},SERVICE_SAVE_METADATA:{service:"resources/metadata"},SERVICE_SAVE_DSD:{service:"resources/dsd"},SERVICE_SAVE_DATA:{service:"resources"},SERVICE_RESOURCES_FIND:{service:"resources/find"}}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,o;n=[i(21),i(22)],o=function(t,e){"use strict";return{en:t,fr:e}}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n;n=function(){"use strict";return{yes:"Yes",no:"No",ok:"Ok",cancel:"Cancel",add:"Add",done:"Done",reset:"Reset","delete":"Delete",updated:"Updated",confirmDelete:"Delete?",edit:"Edit",title:"Title",subject:"Subject",domain:"Domain",key:"Key",datatype:"Data type",supplemental:"Supplemental",areYouSure:"Are you sure?",unsavedChanges:"Some changes are not saved, cancel anyway?",select:"Select...",nullColumns:"Columns cannot be empty",atLeast2Cols:"The dataset must have at least 2 columns",atLeastOneKey:"The dataset must have at least one Key",atLeastOneValue:"The dataset must have at least one 'value' subject",nullColumn:"Column cannot be null",empty:"Is empty",DimensionDataTypeConflict:"Conflict detected between value and datatype defined for the value",EmptyIdCodeList:"The codelist's ID cannot be empty",duplicateColumnIDs:"The column's ID must be unique, check your column's IDs",duplicateSubject:"Two columns cannot have the same subject, check your column's subjects",dataType:"Data type",titleBlank:"Title cannot be blank",subjectEmpty:"Subject cannot be empty",dataTypeEmpty:"Datatype cannot be empty",codelistEmpty:"Codelist cannot be empty",dimension:"Dimension",value:"Value",other:"Other",helpDim:"You need at least one dimension, dimensions are used to define your measure.<br/>Ex. Year, product, area...",helpVal:"You need exactly one measure. It is usually a number.<br/>Ex. Quantity, value...",helpOther:"Add additional informations attached to your measure.<br/>Ex. measurement unit, flags, notes..."}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(){"use strict";return{yes:"Oui",no:"Non",ok:"Ok",cancel:"Annuler",add:"Ajouter",done:"Terminé",reset:"Reset","delete":"Supprimer",updated:"Mis(e) à jour",confirmDelete:"Supprimer?",edit:"Éditer",title:"Titre",subject:"Sujet",domain:"Domaine",key:"Clé",datatype:"Type de donnée",supplemental:"Supplément",areYouSure:"Êtes-vous sûr?",unsavedChanges:"Certains changements n'ont pas été enregistrés, annuler quand même?",select:"Sélectionner",nullColumns:"Les colonnes ne peuvent pas être vides",atLeast2Cols:"La base de données doit contenir au moins 2 colonnes",atLeastOneKey:"La base de données doit contenir au moins une Clé",atLeastOneValue:"La base de données doit contenir au moins une colonne 'valeur'",nullColumn:"La colonne ne peut pas être nulle",empty:"Est vide(s)",DimensionDataTypeConflict:"Conflit détecté entre la valeur et le type de donnée défini pour la valeur",EmptyIdCodeList:"L'identifiant de la codeliste ne peut pas être vide",duplicateColumnIDs:"L'identifiant de la colonne doit être unique, s'il vous plaît vérifiez les identifiants des vos colonnes",duplicateSubject:"Deux colonnes ne peuvent pas avoir le même sujet, s'il vous plaît vérifier les sujets des vos colonnes",dataType:"[FR] Data type",titleBlank:"[FR] Title cannot be blank",subjectEmpty:"[FR] Subject cannot be empty",dataTypeEmpty:"[FR] Datatype cannot be empty",codelistEmpty:"[FR] Codelist cannot be empty",dimension:"[FR] Dimension",value:"[FR] Value",other:"[FR] Other",helpDim:"[FR] You need at least one dimension, dimensions are used to define your measure.<br/>Ex. Year, product, area...",helpVal:"[FR] You need exactly one measure. It is usually a number.<br/>Ex. Quantity, value...",helpOther:"[FR] Add additional informations attached to your measure.<br/>Ex. measurement unit, flags, notes..."}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,o;n=[i(2),i(37),i(26),i(27),i(29),i(20),i(33),i(35),i(24),i(38),i(10),i(40),i(4),i(11),i(41)],o=function(t,e,i,n,o,s,d,a,l,r,u,c,h,p){function f(e){this.config={},this.$cnt=null,t.extend(!0,this.config,e,D),this.lang=this.config.inputLangs[0]||D.inputLangs[0],this.lang=this.lang.toLowerCase(),this.$txtTitle,this.$txtSupplemental,this.dynRadioSubj,this.mlTitle,this.mlSupplemental,this.dynRadioDataType,this.editorType="",this.colID="",this.valuesField=null,this.domainEditor=new o(this.config),this.columnEditorReader=new d,this.subjectReader=new a,this.datatypeReader=new l,this.dynRadioSubj=null,this.dynRadioDataType=null,this.validator=null,this.editorsVisibilityCfg={subject:!0,domain:!0,datatype:!0}}function y(t,e){"undefined"!=typeof e&&(e?t.show():t.hide())}var D={inputLangs:["EN"]},m={txtTitle:"#txtTitle",txtSupplemental:"#txtSupplemental",trSubj:"#trSubj",tdSubj:"#tdSubj",trDataType:"#trDataType",tdDataType:"#tdDataType",trDomain:"#trDomain",tdDomain:"#tdDomainEditor",tblColEditor:"#tblColEditor",lblTitle:"#lTitle",lblSuppl:"#lSupplemental",lblSubj:"#lSubject",lblDataType:"#lDataType",lblDomain:"#lDomain"},v={dimension:"dimension",value:"value",other:"other"},b={code:"code"},E={SUBJ:"radioSubj",DTYPE:"radioDatatype"};return f.prototype.render=function(e,o){t.extend(!0,this.config,o),this.$cnt=e,this.$cnt.html(i),this.$txtTitle=this.$cnt.find(m.txtTitle),this.$txtSupplemental=this.$cnt.find(m.txtSupplemental),this.$trSubj=this.$cnt.find(m.trSubj);var s=this.$cnt.find(m.tdSubj);this.$trDomain=this.$cnt.find(m.trDomain);var d=this.$cnt.find(m.tdDomain);this.dynRadioSubj=new n,this.dynRadioSubj.render(s),this.$trDataType=this.$cnt.find(m.trDataType);var a=this.$cnt.find(m.tdDataType);this.dynRadioDataType=new n,this.dynRadioDataType.render(a),this.mlTitle=new r({langs:this.config.inputLangs}),this.mlTitle.render(this.$txtTitle),this.mlSupplemental=new r({langs:this.config.inputLangs}),this.mlSupplemental.render(this.$txtSupplemental),this.domainEditor.render(d),this._bindEvents(),this._attachValidator(),this._doML()},f.prototype.setEditMode=function(t){this.editorsVisibilityCfg=t,y(this.$trSubj,t.subject),y(this.$trDomain,t.domain),y(this.$trDataType,t.datatype)},f.prototype.newColumn=function(){this.reset()},f.prototype._subjectChanged=function(t){this.updateDataTypes(this.editorType,t),this.domainEditor.reset()},f.prototype._dataTypeChanged=function(t){this.domainEditor.setMode(t,this.dynRadioSubj.get())},f.prototype.setColumnEditorType=function(t){this.editorType=t;var e=this.columnEditorReader.getColumnTypeSubjects(t);if(!e||0==e.length)return void this._subjectsVisible(!1);for(var i=this.subjectReader.getFilteredSubjects(e),n=[],o=0;o<i.length;o++)n.push({value:i[o].value,text:i[o].text.EN});var s=null;1==n.length?(s=n[0].value,this._subjectsVisible(!1)):this._subjectsVisible(!0),this.dynRadioSubj.setRadios(E.SUBJ,n,s),this.updateDataTypes(t,s)},f.prototype.updateDataTypes=function(t,e){var i=this.columnEditorReader.getSubjectDatatypes(t,e);if(i){for(var n=this.datatypeReader.getFilteredDatatypes(i),o=[],s=0;s<n.length;s++)o.push({value:n[s].value,text:n[s].text.EN});this.dynRadioDataType.setRadios(E.DTYPE,o,"")}},f.prototype.reset=function(){this.colID="",this.valuesField=null,this.mlTitle.reset(),this.mlSupplemental.reset(),this.dynRadioSubj.reset(),this.dynRadioDataType.reset(),this.setColumnEditorType(""),this.domainEditor.reset()},f.prototype._subjectsVisible=function(t){("undefined"==typeof this.editorsVisibilityCfg.subject||this.editorsVisibilityCfg.subject)&&(t?this.$trSubj.show():this.$trSubj.hide())},f.prototype.getColumn=function(){var t={};return t.id=this.colID,this.valuesField&&(t.values=this.valuesField),this.editorType==v.dimension?t.key=!0:t.key=!1,t.subject=this.dynRadioSubj.get(),t.dataType=this.dynRadioDataType.get(),t.title=this.mlTitle.get(),t.supplemental=this.mlSupplemental.get(),t.domain=this.domainEditor.get(),t},f.prototype.setColumn=function(t){this.reset(),this.colID=t.id,this.valuesField=t.values;var e=v.other;t.key?e=v.dimension:"value"==t.subject&&(e=v.value),this.setColumnEditorType(e),this.mlTitle.set(t.title),this.mlSupplemental.set(t.supplemental),this.dynRadioSubj.set(t.subject),this.dynRadioDataType.set(t.dataType),t.dataType==b.code&&this.domainEditor.set(b.code,t.subject,t.domain)},f.prototype._bindEvents=function(){var t=this;p.subscribe(u.DYNAMIC_RADIO_CHANGED,this,function(e,i){i==E.SUBJ?t._subjectChanged(e):i==E.DTYPE&&t._dataTypeChanged(e)})},f.prototype._unbindEvents=function(){p.unsubscribe(u.DYNAMIC_RADIO_CHANGED)},f.prototype._attachValidator=function(){e.info("DSDColumnEditor.prototype._attachValidator");var t=this.$cnt.find(m.tblColEditor);this.validator=t.parsley()},f.prototype._detachValidator=function(){e.info("DSDColumnEditor.prototype._detachValidator"),this.validator.destroy()},f.prototype.validate=function(){e.info("DSDColumnEditor.prototype.validate"),val=new c;var t=val.validateColumn(this.getColumn());return this.updateValidationUI(t),!t||0==t.length},f.prototype.updateValidationUI=function(t){if(e.info("DSDColumnEditor.prototype.updateValidationUI",this.validator,t),this.$cnt.find("#lTitle").parsley().reset(),this.$cnt.find("#lSubject").parsley().reset(),this.$cnt.find("#lDataType").parsley().reset(),this.$cnt.find("#lDomain").parsley().reset(),t)for(var i=0;i<t.length;i++)switch(t[i].message){case h.TITLE_BLANK:this.$cnt.find("#lTitle").parsley().addError("TITLE_BLANK",{message:s[this.lang][h.TITLE_BLANK],assert:"required",updateClass:!0});break;case h.SUBJECT_EMPTY:this.$cnt.find("#lSubject").parsley().addError("SUBJECT_EMPTY",{message:s[this.lang][h.SUBJECT_EMPTY],assert:"required"});break;case h.DATATYPE_EMPTY:this.$cnt.find("#lDataType").parsley().addError("DATATYPE_EMPTY",{message:s[this.lang][h.DATATYPE_EMPTY],assert:"required"});break;case h.CODELIST_EMPTY:this.$cnt.find("#lDomain").parsley().addError("CODELIST_EMPTY",{message:s[this.lang][h.CODELIST_EMPTY],assert:"required"})}},f.prototype.changed=function(){return this.mlTitle.changed()||this.mlSupplemental.changed()||this.domainEditor.changed()||this.dynRadioSubj.changed()||this.dynRadioDataType.changed()},f.prototype._doML=function(){this.$cnt.find(m.lblTitle).html(s[this.lang].title),this.$cnt.find(m.lblSuppl).html(s[this.lang].supplemental),this.$cnt.find(m.lblSubj).html(s[this.lang].subject),this.$cnt.find(m.lblDataType).html(s[this.lang].dataType),this.$cnt.find(m.lblDomain).html(s[this.lang].domain)},f.prototype.destroy=function(){this._unbindEvents(),this._detachValidator(),this.mlTitle.destroy(),this.mlSupplemental.destroy(),this.domainEditor.destroy(),this.dynRadioSubj.destroy(),this.dynRadioDataType.destroy()},f}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(2),i(25)],o=function(t,e){function i(i){this.config={},t.extend(!0,this.config,n,i),this.datatypes=e}var n={};return i.prototype.getDatatypes=function(){return this.datatypes},i.prototype.getFilteredDatatypes=function(t){if(!t)return null;for(var e,i=[],n=0;n<t.length;n++)e=this.getDatatype(t[n]),e&&i.push(e);return i},i.prototype.getDatatype=function(t){for(var e=0;e<this.datatypes.length;e++)if(this.datatypes[e].value==t)return this.datatypes[e];return null},i}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=[{value:"",text:{EN:" ",FR:" "}},{value:"code",text:{EN:"Code",FR:"CodeFR"}},{value:"customCode",text:{EN:"Custom code",FR:"Custom code"}},{value:"date",text:{EN:"Date"}},{value:"month",text:{EN:"Month"}},{value:"year",text:{EN:"Year"}},{value:"number",text:{EN:"Number"}},{value:"text",text:{EN:"Text"}},{value:"percentage",text:{EN:"Percentage"}}]},function(t,e){t.exports='<table class="table table-bordered table-nonfluid" id=tblColEditor data-parsley-validate data-validate=parsley> <tbody> <tr><td><label id=lTitle for=txtTitle>_Title</label></td><td id=txtTitle></td></tr> <tr style=display:none><td><label id=lSupplemental for=txtSupplemental>_Supplemental</label></td><td id=txtSupplemental></td></tr> <tr id=trSubj> <td><label id=lSubject for=radioSubj>_Subject</label></td> <td id=tdSubj></td> </tr> <tr id=trDataType> <td><label id=lDataType for=radioDataType>_Data type</label></td> <td id=tdDataType></td> </tr><tr id=trDomain> <td><label id=lDomain for="">_Domain</label></td> <td id=tdDomainEditor></td> </tr> </tbody> </table> '},function(t,e,i){var n,o;n=[i(2),i(28),i(10),i(11)],o=function(t,e,i,n){function o(e){this.config={},this.$container=null,t.extend(!0,this.config,s,e),this.groupName=null,this.radioSettings,this.$radioGroup,this._changed=!1}var s={},d={radioChanged:i.DYNAMIC_RADIO_CHANGED};o.prototype.render=function(e,i){t.extend(!0,this.config,i),this.$container=e},o.prototype.setRadios=function(t,e,i){if(this.groupName=t,this.radioSettings=e,this.$container.html(""),e&&0!=e.length){for(var n=0;n<e.length;n++)this.$container.append(a(t,e[n],i));this.$radioGroup=this.$container.find("input[name="+t+"]:radio"),this._bindEvents()}};var a=function(i,n,o){var s=l(i,n.value),d=t(e);return d.find("label").text(n.text),d.find("label").attr("for",s),d.find("input").val(n.value),d.find("input").attr("name",i),d.find("input").attr("id",s),d.prop("required",!0),o&&n.value==o&&d.find("input").attr("checked","checked"),d},l=function(t,e){return"rd"+t+"_"+e};return o.prototype.get=function(){return this.$radioGroup&&this.$radioGroup.filter(":checked")?this.$radioGroup.filter(":checked").val():null},o.prototype.set=function(t){if(this.reset(),t){var e=this.$container.find("#"+l(this.groupName,t));e.prop("checked",!0),n.publish(d.radioChanged,t,this.groupName)}},o.prototype.reset=function(){this.$radioGroup&&(this.$radioGroup.removeAttr("checked"),this._changed=!1)},o.prototype._bindEvents=function(){var e=this;t(this.$radioGroup.on("change",function(){var t=e.$container.find("input[name="+e.groupName+"]:checked").val();
n.publish(d.radioChanged,t,e.groupName),e._changed=!0}))},o.prototype._unbindEvents=function(){this.$radioGroup&&this.$radioGroup.off("change")},o.prototype.changed=function(){return this._changed},o.prototype.destroy=function(){this._unbindEvents()},o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports='<span><input type=radio name="" value="" style=display:none /><label></label></span>'},function(t,e,i){var n,o;n=[i(2),i(30),i(31),i(11)],o=function(t,e,i,n){function o(e){this.config={},this.$container=null,t.extend(!0,this.config,s,e),this.mode="",this.$divNoDatatype=null,this.$divNoDomain=null,this.$divDomainEditor=null,this.codelistSelector=null,this._changed=!1}var s={},d={idNoDataType:"#domEdit_noDatatype",idNoDomain:"#domEdit_noDomain",idEditor:"#domEdit_editor"},a={code:"code",year:"year",month:"month",date:"date",customCode:"customCode"};return o.prototype.render=function(i,n){t.extend(!0,this.config,n),this.$container=i,this.$container.html(e),this.$divNoDatatype=this.$container.find(d.idNoDataType),this.$divNoDomain=this.$container.find(d.idNoDomain),this.$divDomainEditor=this.$container.find(d.idEditor),this.$divNoDatatype.show(),this.$divNoDomain.hide(),this.$divDomainEditor.hide(),this._bindEvents()},o.prototype.set=function(t,e,i){switch(this._changed=!1,this.setMode(t,e),this.mode){case a.code:this.codelistSelector.set(e,i.codes);break;case a.year:case a.month:case a.date:}},o.prototype.get=function(){switch(this.mode){case a.code:return{codes:[this.codelistSelector.get()]};case a.year:case a.month:case a.date:}},o.prototype.reset=function(){this.setMode(""),this._changed=!1},o.prototype.setMode=function(t,e){if(this.mode!=t)switch(this.mode=t,this.$divDomainEditor.empty(),this.$divDomainEditor.hide(),this.$divNoDomain.hide(),this.$divNoDatatype.hide(),this.codelistSelector&&this.codelistSelector.destroy(),this.codelistSelector=null,t){case"":this.$divNoDatatype.show();break;case a.code:this.$divDomainEditor.show(),this.codelistSelector=new i(this.config),this.codelistSelector.render(this.$divDomainEditor),this.codelistSelector.setSubject(e);break;case a.year:case a.month:case a.date:this.$divDomainEditor.show();break;case a.customCode:break;default:this.$divNoDomain.show()}},o.prototype._bindEvents=function(){},o.prototype._unbindEvents=function(){},o.prototype.changed=function(){return this._changed},o.prototype.destroy=function(){this.codelistSelector&&this.codelistSelector.destroy(),this._unbindEvents()},o}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports="<div id=domEdit_noDatatype>Select a data type</div> <div id=domEdit_noDomain>No limit for this data type</div> <div id=domEdit_editor></div>"},function(t,e,i){var n,o;n=[i(2),i(32),i(17),i(10),i(11)],o=function(t,e,i,n,o){function s(e){this.config={},this.$container=null,t.extend(!0,this.config,e,d),this.clReader=null,this.tmpVal="",this.tmpSubj="",this.loaded=!1}var d={},a={idCodesDDL:"#clSelDDL"},l={ddlChange:n.CODELIST_SELECTOR_CHANGED},r="EN";return s.prototype.render=function(n,o){t.extend(!0,this.config,o),this.$container=n,this.$container.html(e),this.$clDDl=this.$container.find(a.idCodesDDL),this._bindEvents();var s=this;this.clReader=new i(this.config,function(){s._clLoaded()})},s.prototype._clLoaded=function(){return this.loaded=!0,""!=this.tmpVal?void this.set(this.tmpSubj,this.tmpVal):void(""!=this.tmpSubj&&this.setSubject(this.tmpSubj))},s.prototype.setSubject=function(e){if(!this.loaded)return void(this.tmpSubj=e);var i=this.clReader.getFilteredCodelists(e),n=this.$clDDl.val();if(this.$clDDl.find("option").remove(),i){this.$clDDl.append(t("<option>",{value:"",text:""}));for(var o=0;o<i.length;o++)this.$clDDl.append(t("<option>",{value:i[o].value,text:i[o].text[r]}));1==i.length?this.$clDDl.val(i[0].value):n&&this.$clDDl.val(selected)}},s.prototype.reset=function(){this.$clDDl.find("option").remove()},s.prototype.set=function(t,e){if(!this.loaded)return this.tmpSubj=t,void(this.tmpVal=e);if(this.setSubject(t),!e||0==e.length)return void this.$clDDl.val("");var i=e[0].idCodeList;e[0].version&&(i=i+"|"+e[0].version),this.$clDDl.val(i)},s.prototype.get=function(){var t=this.$clDDl.val();if(""==t)return null;var e=t.split("|");return e[1]?{idCodeList:e[0],version:e[1]}:{idCodeList:e[0]}},s.prototype._bindEvents=function(){var t=this;this.$clDDl.on("change",function(e){o.publish(l.ddlChange,t.$clDDl.val())})},s.prototype._unbindEvents=function(){this.$clDDl.off("change")},s.prototype.destroy=function(){this._unbindEvents()},s}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports="<select id=clSelDDL class=form-control></select>"},function(t,e,i){var n,o;n=[i(2),i(34)],o=function(t,e){function i(i){this.config={},t.extend(!0,this.config,n,i),this.columnECfg=e}var n={};return i.prototype.getColumnEditorCfg=function(){return this.columnECfg},i.prototype.getColumnTypeSubjects=function(t){if(!this.columnECfg[t])return null;for(var e=[],i=0;i<this.columnECfg[t].length;i++)e.push(this.columnECfg[t][i].subject);return e},i.prototype.getSubjectDatatypes=function(t,e){if(!this.columnECfg[t])return null;for(var i=0;i<this.columnECfg[t].length;i++)if(this.columnECfg[t][i].subject==e)return this.columnECfg[t][i].datatypes;return null},i}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports={dimension:[{subject:"item",datatypes:["code"]},{subject:"indicator",datatypes:["code"]},{subject:"gender",datatypes:["code"]},{subject:"residence",datatypes:["code"]},{subject:"food",datatypes:["code"]},{subject:"sector",datatypes:["code"]},{subject:"fieldManagement",datatypes:["code"]},{subject:"agriculturalPopulation",datatypes:["code"]},{subject:"census",datatypes:["code"]},{subject:"time",datatypes:["year","month","date"]},{subject:"geo",datatypes:["code"]},{subject:"undefined",datatypes:["code","year"]}],value:[{subject:"value",datatypes:["number","text"]}],other:[{subject:"flag",datatypes:["code","text"]},{subject:"um",datatypes:["code"]}]}},function(t,e,i){var n,o;n=[i(2),i(36)],o=function(t,e){function i(i){this.config={},t.extend(!0,this.config,n,i),this.subjs=e}var n={};return i.prototype.getSubjects=function(){return this.subjs},i.prototype.getFilteredSubjects=function(t){if(!t)return null;for(var e,i=[],n=0;n<t.length;n++)e=this.getSubject(t[n]),e&&i.push(e);return i},i.prototype.getSubject=function(t){for(var e=0;e<this.subjs.length;e++)if(this.subjs[e].value==t)return this.subjs[e];return null},i}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=[{value:"item",text:{EN:"Item"},codelistSubject:"item"},{value:"indicator",text:{EN:"Indicator"},codelistSubject:"indicator"},{value:"gender",text:{EN:"Gender"},codelistSubject:"gender"},{value:"residence",text:{EN:"Residence"},codelistSubject:"residence"},{value:"food",text:{EN:"Food"},codelistSubject:"food"},{value:"sector",text:{EN:"Sector"},codelistSubject:"sector"},{value:"fieldManagement",text:{EN:"Field Management"},codelistSubject:"fieldManagement"},{value:"agriculturalPopulation",text:{EN:"Agricultural"},codelistSubject:"agriculturalPopulation"},{value:"census",text:{EN:"Census"},codelistSubject:"census"},{value:"time",text:{EN:"Time"}},{value:"geo",text:{EN:"Geo"},codelistSubject:"geo"},{value:"flag",text:{EN:"Flag"},codelistSubject:"flag"},{value:"value",text:{EN:"Value"}},{value:"um",text:{EN:"UM"},codelistSubject:"um"}]},function(t,e){t.exports=i},function(t,e,i){var n,o;n=[i(37),i(2),i(39)],o=function(t,e,i){function n(t){this.config={},this.$container=null,e.extend(!0,this.config,s,t),this.$tblMLInput=null,this.txt=[],this._changed=!1}function o(t){var e=d.replace("%lCode%",t);return e=e.replace("%idlCode%",a+""+t)}var s={langs:["EN"]},d='<tr><td>%lCode%</td><td><input type="text" id="%idlCode%" class="form-control" /></td></tr>',a="mlTD_",l={idTblMLInput:"#tblMLInput"};return n.prototype.render=function(t,n){e.extend(!0,this.config,n),this.$container=t,this.$container.html(i),this.$tblMLInput=this.$container.find(l.idTblMLInput),this._create(this.config.langs),this.bindEvents()},n.prototype._create=function(t){if(!t)return"";for(var e="",i=0;i<t.length;i++)e+=o(t[i]);for(this.$tblMLInput.html(e),this.txt=[],i=0;i<t.length;i++)this.txt.push(this.$tblMLInput.find("#"+a+t[i]))},n.prototype.set=function(t){if(this.reset(),t)for(var e=0;e<this.config.langs.length;e++)t[this.config.langs[e]]&&this.txt[e].val(t[this.config.langs[e]])},n.prototype.get=function(){if(!this.txt)return null;for(var t={},e="",i=0;i<this.config.langs.length;i++)e=this.txt[i].val().trim(),e&&(t[this.config.langs[i].toUpperCase()]=e);return t},n.prototype.reset=function(){if(this.txt){for(var t=0;t<this.txt.length;t++)this.txt[t].val("");this._changed=!1}},n.prototype.isEmpty=function(){var t=this.get();return!!e.isEmptyObject(t)},n.prototype.bindEvents=function(){if(this.txt)for(var t=this,e=0;e<this.txt.length;e++)this.txt[e].on("keyup",function(){t._changed=!0})},n.prototype.unbindEvents=function(){if(this.txt)for(var t=0;t<this.txt.length;t++)this.txt[t].off("keyup")},n.prototype.changed=function(){return this._changed},n.prototype.destroy=function(){this.unbindEvents()},n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports="<table> <tbody id=tblMLInput> </tbody> </table> "},function(t,e,i){var n,o;n=[i(2),i(37),i(4)],o=function(t,e,i){function n(i){e.info("Validator_DSD"),this.config={},t.extend(!0,this.config,c,i)}function o(e){return t.isEmptyObject(e)?{field:"title",level:h.ERROR,message:i.TITLE_BLANK}:null}function s(t,e){if(!t.key)return null;if(!t.dataType)return null;for(var n=0;n<e.length;n++)if(t.dataType==e[n])return null;return{field:"dimension",level:h.ERROR,message:i.DIMENSION_DATATYPE_ERROR}}function d(t){return t.key?t.subject?void 0:{field:"subject",level:h.ERROR,message:i.SUBJECT_EMPTY}:null}function a(t){if(!t.dataType)return{field:"dataType",level:h.ERROR,message:i.DATATYPE_EMPTY}}function l(t){return t.dataType?"code"!=t.dataType||t.domain&&t.domain.codes&&t.domain.codes[0]&&t.domain.codes[0].idCodeList?void 0:{field:"domain",level:h.ERROR,message:i.CODELIST_EMPTY}:null}function r(t){var e=[];if(!t)return e.push({level:h.ERROR,message:i.NULL_COLUMNS}),e;if(t.length<2)return e.push({level:h.ERROR,message:i.AT_LEAST_2_COLS}),e;for(var n=0;n<t.length-1;n++)for(var o=n+1;o<t.length;o++)t[n].id==t[o].id&&e.push({level:h.ERROR,message:i.DUPLICATE_IDS});var s=0,d=0;for(n=0;n<t.length;n++)t[n].key&&s++,t[n].subject&&"value"==t[n].subject&&d++;return s<1&&e.push({level:h.ERROR,message:i.AT_LEAST_1_KEY}),d<1&&e.push({level:h.ERROR,message:i.AT_LEAST_1_VALUE}),e}function u(t,e){e&&(t||(t=[]),e instanceof Array?Array.prototype.push.apply(t,e):t.push(e))}var c={allowedKeyDataTypes:["code","customCode","date","month","year"]},h={ERROR:"error"};return n.prototype.validateColumn=function(t){var e=[];return t?(u(e,o(t.title)),u(e,s(t,this.config.allowedKeyDataTypes)),u(e,d(t)),u(e,a(t)),u(e,l(t)),e):(e.push({level:h.ERROR,message:i.NULL_COLUMN}),e)},n.prototype.validateColumns=function(t){var e=[],i=r(t);if(u(e,i),!t)return e;for(var n=0;n<t.length;n++){var o=this.validateColumn(t[n]);u(e,o)}return e},n}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=n},function(t,e,i){var n,o;n=[],o=function(){var t=function(){};return t.prototype.generate=function(t,e){var i="OTHER";return e.key?i="DIMENSION":"value"==e.subject&&(i="VALUE"),this._generate(t,i)},t.prototype._generate=function(t,e){if(!t)return"";for(var i=e.toUpperCase(),n=0,o=!0;o;){o=!1;for(var s=i+""+n,d=0;d<t.length;d++)if(t[d].id==s){o=!0,n++;break}}return i+""+n},t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){}])});
//# sourceMappingURL=fenix-ui-DSDEditor.min.js.map